---
title: Games101 19.Cameras, Lenses and Light Fields
---

## Imaging

![Alt text](image.png)

- 成像 = 合成 + 捕捉
- 合成：光栅化成像 + 光线追踪成像
- 捕捉：把真实世界中的东西变成照片，有各种成像方法。当然最简单的是用相机。比如还有研究光在极短时间内的传播，就能看到光传播的一个过程（transient imagine），这块主要是叫计算摄影学（computational photography）。

我们从相机开始，相机内部发生了什么呢？
![Alt text](image-1.png)

- 各种部件：镜头、棱镜、机身、感光元件、快门

小孔成像：
![Alt text](image-2.png)

- 只有刚好通过小孔的光线不会被挡住，在后面形成倒立的像。
- 这个原理有真正对应的相机，叫针孔相机。

相机的各个部件：

![Alt text](image-3.png)

- 快门（shutter）：控制光线进入的时间

![Alt text](image-4.png)

- 传感器（sensor）：把光记录下来，或者说也叫成像，记录的是 irradiance

![Alt text](image-5.png)

- 如果没有棱镜，会收到各个方向的光，会糊掉。
- 也有人在研究一些传感器，可以记录不同方向的光，这样就能记录 radiance，而不是 irradiance。

我们来分析一下小孔成像：

![Alt text](image-6.png)
![Alt text](image-7.png)

- 可以用这个小孔来拍照，得到这样的结果
- 针孔相机拍出来的东西是没有景深的，任何地方都是清楚的，不会是虚的。

## Field of View

![Alt text](image-8.png)

- 影响我们能看到多大的范围
- 广角镜头就是 FOV 更大
- 这里就是一个简单的相似三角形的计算。

![Alt text](image-9.png)

- 通常以 35mm 格式的胶片为基准，所以传感器大小是一定的。
- 所以我们用焦距来定义 field of view。
- 比如 17mm 对应广角镜头。
- 比如手机可能就是 28mm，不过需要注意的是手机那么薄肯定没有 28mm 的焦距，这里的焦距是等效焦距，就是相当于 35mm 胶片的焦距。（手机的传感器比较小，所以焦距也小）

下面是不同焦距的镜头拍出来的效果：
![Alt text](image-10.png)

如果我们用不一样的胶片，那么传感器的大小也会不一样：
![Alt text](image-11.png)

- 小一些的传感器对应小的 FOV
- 传感器负责记录最后的 irradiance 有多大
- 每个像素最后的 Film 决定要把它存成什么样的图片格式
  ![Alt text](image-12.png)
  ![Alt text](image-13.png)
- 越大的传感器，分辨率越高
- 所以通常越大的相机越好

## Exposure

曝光到底是什么？

![Alt text](image-14.png)

- 由 irradiance 和 time 决定，曝光的时间越长，光线进入的越多，最后的结果就越亮。
- 除此之外，还有光圈的大小，光圈越大，进入的光线就越多，最后的结果也就越亮。

![Alt text](image-15.png)

- 光圈其实就是一个挡光的东西，它是一个仿生学的设计，仿照人的瞳孔，光线强的时候，瞳孔会缩小，光线弱的时候，瞳孔会放大。由 f-stop 控制。
- 快门，shutter speed 越快，光线进入的时间就越短，最后的结果就越暗。
- iso，感光度，它是一个后期处理，接受到多少光，最后再乘上一个 iso。

![Alt text](image-16.png)

- 5,6 是欧洲写法，其实就是 5.6。这个数越大光圈越小。
- 1/1000 秒就是快门开放的时间，1/1000 秒就是 1ms。
- 光圈用太大，照片看上去就很虚
- 如果人在跑步，快门时间长，就会看到一个模糊的东西
- 信号本身有噪声，如果放大信号，也会放大噪声，这就是为什么 iso 调高会有噪声的原因。
- 可以把光理解为光子，快门时间不够，进到感光元件部分的光子数就少，光子数少造成噪声。

ISO：
![Alt text](image-17.png)
![Alt text](image-18.png)

![Alt text](image-19.png)

- 也就是光圈直径的倒数

![Alt text](image-20.png)

- 快门升上去打开，然后再关上，它并不是一瞬间就打开的，有一个过程。

![Alt text](image-21.png)
![Alt text](image-22.png)

- 如果有个运动的物体，快门打开一段时间，这段时间传感器在不断的记录，所以就会有模糊的现象，这就是运动模糊。
- 其实也就是在时间上采样
  ![Alt text](image-23.png)
- 机械快门打开有个过程，会导致 rolling shutter（超高速运动的东西会造成扭曲）
- 不同的位置记录的是不同的时间，就会出现扭曲的现象

![Alt text](image-24.png)

- 大光圈会引起景深的问题，快门时间会引起运动模糊的问题，这两个事情需要权衡。

![Alt text](image-25.png)

- 高速摄影：快门时间短，要么用大光圈，要么用高 iso。但是高 iso 会有噪声，所以实际还是用大光圈。

![Alt text](image-26.png)

- 延时摄影：快门时间长，用小光圈慢慢拍。

## Lenes

![Alt text](image-27.png)

- 一般都是用棱镜组来成像

![Alt text](image-28.png)

- 实际的棱镜也没法把光聚到一块，会有 aberration（像差）

我们研究的棱镜呢是理想化的薄棱镜：
- 厚度忽略不计
- 能集中光线到焦点

![Alt text](image-29.png)
- 按照光路的可逆性，过焦点的光线会变成平行光。
- 棱镜组通过不同的组合，可以改变焦距。

![Alt text](image-30.png)
- 物距$z_0$，像距$z_1$，焦距$f$，有这样的关系：$\frac{1}{f} = \frac{1}{z_0} + \frac{1}{z_1}$


### 00:52:59,49

![00-52-59](tmp/00-52-59.jpg)

那这里呢给大家这个简单的解释一下这个事情是怎么做的好吧

首先平行光过焦点

然后过焦点的这个光会变成平行光好吧

那么这样一来我可以得到这这么一个基本配置

然后大家可以看到我

我对于任何一个这个物体啊

某一个这种尖的物体

我可以成像成一个反应的向

然后我画两条线出来

222 条光路

一条是平行光过焦点

一条是过焦点出来平行光

而这个是很简单的

那咱们要看的是什么呢

那咱们不要忽略这条这个所谓欺负过这个终点的这这么一条路

呃

这这条光路

### 00:53:33,99

![00-53-33](tmp/00-53-33.jpg)

那咱们只看这么一部分

就只看这两条光

然后呢我们现在要推什么

还记得吧

我们要推这个呃

物距

像距和焦距

它们三者之间的关系

那么它们三者之间的关系从哪儿找的

肯

定得从几何的这个方向上来找对吧

那我们看到了什么呢

### 00:53:50,49

![00-53-50](tmp/00-53-50.jpg)

我们看到了这么一个几何关系

大家来看大家看

对于左边来说

就就是说我这个发出来的光啊

到达这个棱镜之前

我是不是可以形成这么两个相似三角形

一对相似三角形对吧

这个这个呃这个点它发出来的光穿过焦点

然后再打到轮胎上

而形成这么两个相似三角形

所以有了这个第一组这么一个关系啊

就是这个物体实际的高度除以这个它它到这个呃焦点的距离

然后它应该等于什么呢

等于这个在棱镜上这么一段 a

除以这个焦距没问题啊

相似三角形

那同样道理

这个过了棱镜之后

右边我也发现了一个相似三角形诶

我发现相似三角形什么呢

同样的比例啊

咱们把它写出来对吧

同样比例写出来之后呢

然后我们就可以这个简单做一做这个数学运算

### 00:54:35,49

![00-54-35](tmp/00-54-35.jpg)

这刚才这两个比例哈

然后怎么做呢

我把这两个对应的 h 啊

就是他两个对应高度物和项的高度给拿到一边

因为这俩我不知道对吧

然后这个比如说把 h 除过来

把这个 z z0 减 f 拿过去

右边同样处理诶

都写成 h 呃

这两个对应他们两个高度

这个像和这个呃物它们两个的高度

它们两个高度之比是一样的呀

那所以我就可以把这两个式子写在一块

挤在一块之后

他又会发现那剩下的全是最最简单的数学

我只需要解除这个最后的这个公式就好了

怎么做呢

把它盛出来盛出来展开

展开了之后挪到一边去

然后就可以写成这个性格

所以这是非常非常简单的一个这个公式啊

这个公式就是反映了啊

咱们再次说焦距

物距相聚之间的这个一个一个关系啊

这个是一定都会满足的

然后呢这个东西又叫做什么高斯的这个

这个这个定理哈

当然我们有时候就直接管它叫做这个啊薄棱镜的这个公式啊

这个非常简单

那前提是我们对于这个理想化的棱镜对吧

我们刚才说平行光过焦点

过焦点呃

会变平行

好啊

那没问题

那呃这个呢非常简单

### 00:55:45,99

![00-55-45](tmp/00-55-45.jpg)

那这里呢有一个非常不错的这个演示软件哈

演示软件这里给大家演示一下

大家可以看到这个软件呢呃嗯大家也可以从这个链接中直接点开

### 00:55:52,99

![00-55-52](tmp/00-55-52.jpg)

我们刚才说啊

我们假设这个这个呃哎哟哈 au 好

我们假设说这个呃呃棱镜它有一个这个焦距叫 f

然后如果我调这个

这个左边啊 s o 啊

我们的这个概念用的不一样

但是没有关系

就是说你看我调这个物距的过程中

这个相机要跟着变

看

看见没

然后同样道理是这个另外一边我调也是一样的

就是有这么个关系

然后呢我也可以调整调整这个焦距

那我可以调整这个很短的焦距

那这样的话物距和像距不太一样啊

就大家可以看到诶对吧呃就会有这么一个关系在里面

所以它们三者之间的关系很很清楚的对吧好

那没问题

### 00:56:37,99

![00-56-37](tmp/00-56-37.jpg)

这就是这个薄棱镜的这么一个基本原理好吧

### 00:56:40,99

![00-56-40](tmp/00-56-40.jpg)

那么我们通过这个宝棱镜

啊就可以解释好多好多的问题

我们根本不需要到实际的棱镜组

那怎么怎么来解释呢

我们先解释第一个问题

这个所谓 defocus blur

这个就是能够解释景深的这么一个问题哈

然后我们这个先来看这么一个简单式子呃

### 00:56:54,49

![00-56-54](tmp/00-56-54.jpg)

这是怎么回事啊

就是说我们为了解释这个模糊

我们得引入一个概念

这个概念呢叫做这个呃所谓 circle of confusion

这 circle of confusion 是什么东西啊

首先呢简称为 c o c 啊

circle of confusion

coo c

这个 coo c 是什么意思

意思就是说啊你这个原本某一个这个呃

我知道原远处如果有一个这个平面

然后

这个平面呢所有的光它经过棱镜之后

都会被这个聚焦到这个呃右边这某一个平面上啊

那我就说这个左边这个平面

这叫 vocal play

然后右边是我成像的

这个就是就是看上去最锐利的这么一个成像平面

那如果说我的物体不在这个 focal plan 上

那会造成什么情况

大家想大家都照顾这个这这个这个像对吧

然后开任何一个这个呃就一张照片出来

然后他肯定有一个地方

然后他是这个完美的

他不模糊的

然后其他地方都要模糊

那比如说这个地方它远离了这个这个 focal play

他肯定要模糊

对

吧那他为什么会模糊呢

咱们来看一看

是这么回事

就是说啊这个这个任何地方有一个点有一个点呢

它穿过棱镜之后

我们知道这个呃我们可以算他这个用这个棱镜的这个公式对吧

呃焦距分之一

它就等于物距分之一

加上这个这个这个像距分之一诶

那这个像距分之一就告诉你它像距它应该成像在这

它会被聚焦到这里

但是你的成像平面呢不在这个地方

你的成像平面在他离他有一段距离的情况下

那怎么办呢

我们之前想光线不会不会碰撞

光线继续传播

那继续传播就意

味着说我原本左边有一个点

那然后我经过了这个诶棱镜之后

他到了这个点之后

继续再往前走

再往前走

就等于这一个点呢

当你被这个呃你的所谓呃叫什么来着

这个 sensor 感光元件了

那接收到的时候

它就不再是个点了

它变成了一片

那当然这是一个二维的一个图对吧

它变成了一条线

那实际上对于这个呃三维的实际的情况对吧

我们认为这整个棱镜也是圆的

那整个这一个点它在你接收到的时候

它就会变成一个圆对吧

是这么回事

那这个语言呢就叫 circle of confusion

为什么呢

因为你

在这个圆这个这个范围内

你就区分不了它是这个这个哪个点来的

因为比如说你从这个点来

然后呢它也可以投影出来一个这个这个圆

这两个圆就叠在一块了

所以你就不知道这个点到底在哪

所以这个 circle of computer 起的名字很很对的啊

没有什么问题

那么我们来看看这个呃怎么来算这个 circle of computer 的大小对吧

那肯定这个和几个因素都有关

首先和这个 aperture 的大小有关系

然后怎么说呢

我们看这里其实形成了两个相似三角形

大家看对吧

左边这么一个三角形

右边这么一个三角形

那么

我这个这个呃 circle of computer 呢

除以这个呃这个 app 它们的直径啊

然后我等于什么呢

大家可以看到等于这这一段等于这一段除以这段太简单了对吧

相似三角形

那么这个这段是什么

大家看这个 z i 这个就是像距这个事情是我知道的对吧

因为我知道这个物体离它多远

那物距知道呃

这个焦距知道

那像剧自然知道 zi 我知道

然后呢我又知道我的成像平面和棱镜离得有多远

所以 zs 我知道他俩一减就是这个 d prime

所以我就知道这个式子了

那这个式子反映了什么问题哈

就是说这个如

果我认为呃我这个嗯这个 circle of computer 和其他这些都没关系啊

其他假如说我可以把它这个固定下来

那也就是说我看某个距离的这个物体

它的这个模糊程度和什么有关呢

是和这个 app 的大小有关系的

比如说我们把这个 a 拿到右边去

哎

那就说明这个 c o c 的大小和这个呃这个棱镜本身它的大小

它是成正比的对吧

我们得到这么一个关系

所以这个事情啊其实也都挺容易啊

没什么问题

那么我们为什么要介绍这个所谓 circle of confusion 呢

是因为唉 circle of confusion 就直接告诉我们你看到的东西模

### 01:00:52,99

![01-00-52](tmp/01-00-52.jpg)

糊不模糊取决于光圈的大小

那么光圈如果这个光圈除以 1.4

这个 f 数是 1.4 对吧

而不是除以啊

杠哈

就是说这个这个啊光呃这光圈的 f 数是 1.4

那就意味着是大光圈

大光圈自然就期待能够看到更模糊的效果

然后这个小光圈就看不到对吧

然后呢这个在这个准备这个课程的过程中

我还专门查了一下这个 c o c 到底是什么意思

就是 circle of computer

我希望给大家一个中文翻译

结果呢我发现了这么一个事情啊

这个实在是太有趣

是不得不给大家分享一下

我拿去 google 翻译了

一下 circle of computer

翻译成混乱的圈子

这是真行好吧嗯这个行吧

反正这个大家当笑话看了好吧

反正这个也就是说 ai 距离统治世界还有段距离是吧

这个还得再努力还得再努力好吧

贵圈真乱是吗

这简直了行吧行吧行吧啊

这 coo c 啊这么个道理啊

就是因为你的这个一个点

然后成像过来反映到了你的这个呃 ser 上面变成了一个圈啊

这个意思好

那么呃这个这个我们回头再来看光圈啊

### 01:02:06,49

![01-02-06](tmp/01-02-06.jpg)

我们不是说这个 c o c 跟光圈大小是成正比的嘛

对吧好

那这样一来呢

我们现在回头把这个光圈给

定义清楚之前我们定义说是定义它直径分之一对吧

其实际上是不对的

它这个这个 f 数的定义它是有明确的定义的

是什么呢

是这个呃焦距除以这个这个呃光圈的直径好吧

那也就是说确实跟直径分之一有关系

但是还跟还跟焦距有关系

是 f 去除以这个呃直径

那么正常情况下很多相机呢它都有这些这些各种各样的这些数

这 f 数比如 1.42 啊这些这些事情啊

然后就是说呃之前我们说了

他经常会写成 f 杠多少

也直接写成 f 多少

我们就关心这个数就行了

好那么呃通

过这个定义我们直接可以看出来啊

对它等于什么呢

这个这个数是 n 啊

如果这 f 数如果我们定义成这个 n 的话

它就等于 f 除以 a 嘛对吧

f 是这个焦距

a 是这个光圈的直径

那很简单对吧

### 01:03:08,49

![01-03-08](tmp/01-03-08.jpg)

那对于这些不同的这些相机来说

那么就可以直接算它的 f 数对吧

然后这个知道 f 知道 d 他一除就可以得到这个 f 数

那没有问题

那所以基本上来说啊

我们这也做了一个什么事情

就相当于是把 f 数和光圈的实际大小和这个焦距

把这三者联系在一块啊

它是这么定义的行

那咱们为什么

要用这个呢

### 01:03:29,49

![01-03-29](tmp/01-03-29.jpg)

那就是说啊

还记得咱们刚才说这个 coo c 的大小等于 a 乘以某个东西对吧

a 不就是那个那个呃光圈的这个直径吧

那自然就等于焦距除以 f 数啊

焦距除以 f 数就于 f 除以 n

那同样道理

这个大家又可以看出来这个 coo c 和什么又有关系对吧

这个 coo c 和这个呃这个 n 是有这个呃怎么说呢

就是有反比关系的对吧

那也就是说我们平常我为了拍这个更清楚的这个这个照片

那我自然要用小光圈

就是这么一个道理对吧

那所以从上面这个例子大家可以看明白好

那就

没问题了

和 f 数也就联系起来了啊

### 01:04:06,99

![01-04-06](tmp/01-04-06.jpg)

ok 那么下面一个问题就是这个说这个这个这个棱镜啊

我们之前不是说我们可以给棱镜做一个简单的模型

就是这个薄棱镜对吧

然后我们说光线怎么样穿过它

我们都知道诶

那么光线穿过它

我知道那自然而然我就可以用薄棱镜来渲染啊

那我之前说我们用这个呃

正常的这个这个我们现在做 plication 也好

怎么样也做也好啊

我们都是从这个怎么怎么产生光线

还记得吗

ratiation 我们从这个相机往任何一个像素中心去连这个线

其实就默认了这是小孔

成像的模型对吧

针孔摄像机的模型

但是我们完全可以渲染出这种模型了

### 01:04:45,49

![01-04-45](tmp/01-04-45.jpg)

就是这样的

我们可以模拟这个薄冷静

然后我们可以给它一个这个呃焦距对吧

然后我们可以这个把它给放置的

这个就是说我的这个成像的平面

所谓这个 ser 和这个这个这个镜头有多远

然后实际去做光线追踪

那这个怎么做呢对吧

这个很简单很简单

### 01:05:04,99

![01-05-04](tmp/01-05-04.jpg)

大家来看这么一个例子

其实就完全就可以明白了

那么首先呢我肯定要先定义这个场景

定义场景

我肯定得定义这个棱镜啊

各方面的各种各样的事情

那

所以给大家一种设定方案怎么做呢

首先啊我先确定我的这个 sensor 它本身有一定大小啊

这肯定得定义

这就是我的成像平面嘛对吧

然后它本身在空间中占了多大这么一个区域

然后呢我还定义一个这个呃棱镜本身的属性

棱棱镜的属性呢就是它的这个这个这个呃焦距和它的光圈的大小

没问题吧

我可以定义这些属性

这些属性大家看到和场景都还没关系呢对吧

就是我先把这些成像平面和呃棱镜我都定义起了

这里就没什么所谓 camera position

没那个东西了

没有那个小点了对吧

我把

这个定义下来

那么下面一个呢我定义什么呢

我定义我把这个棱镜啊放的离这个场景中某一个平面有多远好

我就认为好

我这个平面是是我想这个着重我去我去拍摄的

就是这个意思啊

然后就是这一个平面

我认为他这个呃离嗯我的冷静距离也就是物距是 z0

好吧

我把这个棱镜真正的放在了场景上的某个位置

不就说白了就是这个意思吧对吧

那我棱镜属性设置好了

这个 sensor 设置好了

我又把它放在场景中某个位置了

那这样的话根据棱镜公式

我知道这个呃物距的是是 z

零对吧

然后我又知道它的焦距是多少

我自然知道相距是多少对吧

那也就是说这样就知道这个 a sensor 呃

和这个这个这个棱镜的距离是多少的

就是这个 zi 没问题啊

这刚才我们说的这个呃薄棱镜的公式

那这样一来呢

我们就可以实际来做 retracing 对吧

那怎么做呢

很简单啊

### 01:06:46,99

![01-06-46](tmp/01-06-46.jpg)

这么做就是说我我现在不就是想找一些光线

让它穿过棱镜能够打到场景里面去吗

那行那我对于我的三字上面呢

我来找一个这个哎呀

好

问题是这样哈

有同学有同学问这个问题

说这个呃这个棱镜和透镜是不是

一个是不是一个概念

呃好像我一直在在这个混用这个概念哈

呃理论上来说应该是管它叫透镜

而不是把它叫冷静哈

呃棱镜应该是另外一回事

嗯好那行

从现在开始我来改口啊

就是说不管怎么样

我们这节课说的都是这个 length 啊

然后呃就就叫透镜吧

好那没问题

那呃是这样哈

那我在这个成像平面上呃

或者说感光元件上选一个点 x prime 好吧

然后呢我在这个透镜上选另外一个点

就是透镜本身不是薄的透镜嘛对吧

然后我认为他是在这个上面的任何一个一个点上

它本身就不是

一个圆吗

对我在上面选一个点

那这就是第二步好

那么我们选定了这两个点之后

我把这两点连一连一条线

连一条线之后

我就立刻可以知道他会这个往另外一个方向去到哪儿对吧

就为什么我知道呢

是因为这个呃连着这条线啊

它是从这个这个 x a prime 等 x prime prime 对吧

它这个中间他们两个的垂直距离就是相距嘛

那么我知道这个这个光过去了之后

他一定会达到这个 x 这个三点这个这个位置

这是在哪儿

他一定是在这一个哎平面上对吧

这这个不会有问题

然后这就是我们在

用能力公式我们可以知道它会达到这么一个位置上去

那就没问题

那我知道呃

就是说穿过 x prime 和 x 这个 prime prime

然后到这个 triple prime 上面

然后这条光线这是一个什么样的方向

诶

这个是没问题的

可以知道

那我知道这个了之后怎么办呢

那我自然而然我就知道哦

这条这条光线最终会被记录到这个呃 3s 上的呃这么一个点上好啊

这样的话我就只需要考虑这一条线

这个 x double prime 到 triple prime 这条光线上

它带有的 radiance

最后算出来可以寄到这个 x prime 上就可以了

没问题吧

唉也就是说这个呃说

白了其实就是简单利用一下这个棱镜公式去算一算

它这个折射的光线的方向就可以了

好吧那行

那这就没有问题啊

好我们那就进入下面一个这个这个话题啊

### 01:09:09,99

![01-09-09](tmp/01-09-09.jpg)

啊那我说呃下面一个我们就可以用这个 defocus blue 来正式的定义嗯

这个景深这么一个概念好吧

那所谓景深

那咱咱们看这个两张这个照片哈

### 01:09:23,99

![01-09-23](tmp/01-09-23.jpg)

两张照片

然后他用的就是不同的这个光圈大小

用大的光圈和小的光圈没问题吧

那么我就是说啊这个呃我们之前知道大光圈对应大的 c o c

然后得到的就是一个点会变成更大的

一个圆

所以就会更模糊

没错吧

那么但是总归在有一些地方它是不模糊的

那就是在他的这个这个这个呃就是 focal plan 啊对吧

在这个平面上都是不模糊的

那也就是说什么呢

也就是说啊我这个用大光圈和小光圈会影响到什么

会影响到这个模糊的范围对吧

就是说我知道在这些地方它总是不模糊的

但是为什么这个稍微远点它就模糊了对吧

它肯定有一个模糊的范围

然后就是说呢我这个用大小光圈会影响这么一个范围

那咱们现在来研究这么一个范围好吧

这是怎么回事呢

### 01:10:14,49

![01-10-14](tmp/01-10-14.jpg)

咱

们可以看到啊

就是说这个呃有有这个光

然后经过这个透镜透镜

然后它会达到某一个这个成像平面

在这个成像平面的附近一段区域内诶

这个区域内我都认为啊这个 c o c 是足够小的

大家看这里定义就是这么回事

我们怎么定义呢

我们认为景深就是指在这个呃实际的这个场景中

有一段这个深度

这一段登录经过透镜之后

会在这个呃会在这个这个这个呃横向平面的附近形成一段这个区域

这段区域内我认为 coo c 都是足够小的

是这么一个意思

好吧

这样想

那就那就没有

问题好

那呃呃所以说呢那我要算这个景深

其实我就是想算在 c o c 这个呃很小的一段范围内

然后呃我我基本上认为这个对应的那边我看到的这个场景

这一段它是呃就是清洗的诶

为什么我们可以这么理解呢

你可以这样想啊

虽然他不是这么回事

这样想就是说你的成像平面不是有各种各样的像素嘛对吧

一个像素它再怎么说它不是一个点

它是有这个大小的对吧

当这个 c o c 的大小跟像素相比

它只要跟像素差不多或者比像素小

哎我都认为得到的结果最后是锐利的

对吧我可以这么认为

那也就是说这就是为什么说我不止说这个成像平面

自己成像平面附近的一个很微小的范围诶

我都是可以接受

认为这一段成像出来结果都是锐利的啊

这样想就对了

那所以说这个呃所谓景深对应的这一段就是这个 cc 小的这一段好

### 01:11:54,49

![01-11-54](tmp/01-11-54.jpg)

那么咱们来看这么一个这个图哈

这个图看起来非常复杂

其实一点也不复杂

然后大家这个是怎么说呢

我说景深实际上是指这场景中间的某一段深度

然后使得它经过这个棱镜之后到达成像平面附近

在这个范围内

它的 c

o c 都比较小对吧

我们就是这么说的嘛

那我可以考虑这个景深的最远处和最近处呃

最近处我可以让它穿过棱镜呃

呃透镜

然后让它这个到某一个地方对吧

然后最远处穿过透镜

它会到某一个地方

然后这样的话呢我就可以得到这么这么一个范围

然后这个范围它对应 c o c 是多大

我自然也知道好吧

那这些我都可以用各个不同的距离把它给标注出来

这里呢不做推导好吧

这里其实想推导的话超级简单

大家不要看这里量这么多哈

我们到底要干什么

我们要把这个 the field 也

对应了它这些深度

比如说最远的这个深度叫 df 大写 d 啊

和他最近的这个深度叫 dn

以及他在这个这个聚焦的平面上

focal plan 上它的这个深度叫 ds 大写

然后他这个投影过来之后

不要投影过来啊

穿过龙透镜之后

它到这个成像平面附近

它对应的深度

我们希望把这几个深度和这个呃焦距给联系起来啊

就是这么一个事情

那那就是说简单的来说

就是说我们看这边形成的相似三角形就好了啊

然后这里就不再给大家说了

看这个式子大家肯定都会明白

就在这个这个透镜的右边来

进行分析就可以了

然后呢我们知道所谓 depth of field

我们刚才定义了就是某一段深度多少呢

df 减 dn 就是这一段对吧

然后这个深度到底有多少

然后我们就可以解出来啊

非常简单非常简单

真的不要看那么多数啊

### 01:13:38,99

![01-13-38](tmp/01-13-38.jpg)

ok 那么同样道理

这里也有也有一个这个这个例子哈

然后这里给大家看一眼

然后啊这是什么意思呢

### 01:13:45,99

![01-13-45](tmp/01-13-45.jpg)

就是说大家可以看到这边啊

从这个点到这个点

那这就是我认为这就是呃 det field 没问题

然后呢那我可以调一调

比如说诶我可以调一调这个呃我这个不同的这个深度

假如

说我要呃我要看怎么说呢

就是说我的 depth of field 在变化对吧

然后这边就是我的这个 sensor

对应的就是 sensor 离这个呃透镜的距离在变化诶

我可以看到这个 s 离这个呃透镜距离近的时候

然后对应 deft field 就变大诶

然后这个离太远的时候

deft field 变小

当然了

然后还有一些这个这个其他的各种性质

比如说最简单的性质

如果我改变 focal length 对吧

就是说这个改焦距的时候会有这么一个会有这么一个这个现象对吧

然后这个如果我用这个大的焦距

我就会看到更浅的这个 david 也就看到了这个就是只

有一小段是不模糊的

其他地方都是模糊的对吧

那如果说我要改这个 f number

f number 是什么

还记得吧

就是改这个棱镜不是透镜的大小呗

就是光圈的大小呗

光圈改光圈大小的时候

我会发现也有这么一个性质啊

改光圈大小的时候

我会发现这个光圈越小

然后我发现景深越大

这个是非常能解释问题的

就是光圈越小嘛

我这个嗯透镜就越接近这个小孔对吧

接近小孔的话

在各处都应该是这个清晰的

那也就意味着它的这个 depth of field 就是清晰的范围会大

有问题啊

那所以说通过这个大

家就可以这个呃去分析这个事情

以及说我们还可以这个做另外一个实验

就是诶这里把它调回来

比如说我们可以调这个 confusion

如果我对这个 circle of confusion 的大小

这个呃做一些限制

我认为哈就这么大的时候我还能接受对吧

我还觉得这个时候这个呃各处城像这些东西都是清晰的

那我自然而然对应更大的 circle of computer

得到的这个景深就越越就越深

就是这个意思好吧行

那这回这个这块景深这块就说明白了

### 01:15:48,49

![01-15-48](tmp/01-15-48.jpg)

景深就是指这个成像清晰的一段范围啊

这个意思行

### 01:15:53,49

![01-15-53](tmp/01-15-53.jpg)

那么我觉得今天应该是没时

间来这个继续讲广场和这个所谓 loomy graph 这个事情了哈

然后广场咱们留到下一节课开始再给大家说吧

虽然颜色这块也有很多的内容哈

就是颜色这块涉及到感知

可能来说比这节课还要相对来说难以理解一些

为什么呢

因为这节课毕竟如果大家这个呃推导工作没有做过

没关系

大家这个照相照得多

对这块理解肯定是没有问题的

那么下节课讲颜色与感知的时候

有很多事情是违背常理的

然后所以说我们嗯下节课再好好把这个话题说一说

在争取把这个呃广场再继续往后呃

看看吧

如果有时间就讲

没时间算了好吧

那那咱们今天这个哦好吧

有同学反应说让讲完

今天就不讲完了

今天不讲完了

实在是不敢再拖堂了

那么嗯这这边是这样啊

我之前给大家解释过一小时 15 分钟

这是正常时间啊

我原本之前这个课正常的课时时间就是一小时 15 分钟

然后呃那行没问题

那今天我们说到这儿

然后如果大家有问题的话

欢迎呃这个这个呃现在来呃

这个

发弹幕啊

然后我现在关注一下

然后如果没有的话

其实现代摄影入门啊是是这么回事

就是说我们这个这个图形学嘛

这肯定是得把这个呃这个这个相机这块儿给讲讲明白对吧

就是说相机这里面涉及到各种各样的公式

但推起来真的不难

就是就是这么个意思

就是咱们把各个这个不同的这些功能

各种不同的组件

它到底是什么意思

说明白就好

在这里给大家道歉哈

这个是确实它应该叫透镜

不应该叫棱镜啊

这是真是糟糕

我想当然哈啊

ok 那没问题啊

如果有同学在反应

希望想多了解广场的话

我想想办法多说一点吧

但其实从图形学的角度上来说

不涉及具体项目

广场本身挺好定义的

这个并不难哈

那那行没问题

有同学反映啊

曝光补偿和曝光时间

光圈大小有什么关系诶

咱们之前不是这个说了吗

放在这个 slides 里面

三个的不同影响吧对吧

就是三个不同因素呃

然后 f stop 是光圈大小

也是透镜大小

这可以这么理解

可以这么理解

就实际上来说你是通过不同的东西去去挡这个透镜哈

然后你就可以理解成我是在动态的改这个透镜的大小

这是可以这么理解的啊

没什么问题

对啊 ok 啊

这公式现在还有用吗

有啊有啊

就是就是现在来说

虽然大家用这个呃薄冷呃

薄透镜哈

用的这个这个比较多

但实际上来说在生产制中间各种各样这个透镜组对吧

然后然后这些设计肯定还都要用到这些公式

然后他们还有各种各样复杂的这些呃不讲就不只是这个凸透镜

还有这种凹透镜

还有一面是平的

这种凹透镜都会放在一块儿

这就是我说为什么组合在一块儿可以去动态的改变

改变它的这个呃焦距啊

是这么个意思

好吧嗯成像位置和焦点的关系是怎么理解

这个其实完全不是一回事啊

就是说这个嗯对吧

丞相嗯就这样想吧

就是相当于满足这个呃嗯满足这个透镜公式的这个这样一些配置

就是说呃在物距是某一个距离的情况下

然后如果焦距是某一个距离

你可以算出来一个相距

如果你正好把成像平面放

那那就是说你正好可以看到那个在物距那么长的这个这个距离的呃

那个平面它的清晰的投影投到这个呃这个感光的这个这个胶片上

所以说嗯应该是这两个之间没有什么关系

是一个实际的一个一个这个位置和一个这个就是焦点的这么一个位置

就是说焦点它唯一的它的性质就是说这个过焦点会变平行

平行的会过焦点是这么个意思

它和实际的没关系

理解就理解成这个呃透镜左边画一个三角形

右边再画另外一个三角形

就这么理解对了

好吧啊好嗯

今天讲的和视锥这个关系有

但是这个比较复杂

这我就不得不再多说了好吧

那 ok 那要不咱们今天讲到这儿好吧

ok 那行

### 01:20:06,49

![01-20-06](tmp/01-20-06.jpg)

感谢大家的这个大力支持啊

那咱们这节课讲完还有三节课

然后嗯之后咱们在这个把后面几节内容再好好讲完

这节课就这这这门课差不多就可以圆满结束了

行啊

现在咱们把时间交还给技术秘书同学啊

感谢大家啊

咱们这几天后再见啊

拜拜

### 01:20:28,99

![01-20-28](tmp/01-20-28.jpg)
