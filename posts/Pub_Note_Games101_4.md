---
title: Games101 4.Transformation Cont.
---

补充上节课的内容：
![Alt text](image.png)

- 如果我们逆时针旋转-theta 角度，会发现得到的矩阵刚好是旋转 theta 角度的转置矩阵。
- 即旋转矩阵的逆等于旋转矩阵的转置。
- 在数学上，我们把这样的矩阵叫做正交矩阵。

## 3D Transformations

用齐次坐标表示三维空间中的点或向量：
![Alt text](image-1.png)
![Alt text](image-2.png)
有一个问题是，在这样的矩阵表示下，我们是先应用线性变换还是先应用平移？
如果我们把变换展开就很清楚了：
$\begin{bmatrix} x' \\ y' \\ z' \end{bmatrix} = \begin{bmatrix} s_x & 0 & 0 \\ 0 & s_y & 0 \\ 0 & 0 & s_z\end{bmatrix} \begin{bmatrix} x \\ y \\ z \end{bmatrix} + \begin{bmatrix} t_x \\ t_y \\ t_z \end{bmatrix}$
是先应用线性变换，再加上平移量。

![Alt text](image-3.png)

绕任意轴的旋转矩阵很难写，但是我们可以先从简单的开始，绕 x, y, z 轴的旋转矩阵：
![Alt text](image-4.png)

- 绕哪个轴旋转，哪个轴对应的坐标就应该是不变的
- 除去这个特殊的行和列，剩下部分其实就是一个二维的旋转矩阵

为什么$R_y$的矩阵和$R_x$和$R_z$的矩阵不一样？

- 如果你尝试像之前二维旋转矩阵推导的图应用在这些平面上，xoz 平面、yoz 平面、xoy 平面，你会发现只有 xoz 平面是按顺时针旋转的，其他两个是逆时针旋转的。
- 或者从叉乘的角度来看，$x \times y = z$，$y \times z = x$，$z \times x = y$，其中$ z \times x = y$，这个顺序跟坐标的顺序是反的。

![Alt text](image-5.png)

- 把复杂的旋转分解成绕 x, y, z 轴的旋转
- 绕 x、y、z 轴的角度分别叫做 pitch($\alpha$)、yaw($\beta$)、roll($\gamma$)角，这三个角叫做欧拉角。

### Rodrigues' Rotation Formula

![Alt text](image-6.png)

- 罗德里格斯公式根据旋转轴和旋转角度来计算旋转矩阵。
- 其中旋转轴通过一个向量来定义，那么存在一个问题，一个向量只能定义一个方向，但是旋转轴的起点在哪里呢？
  实际上，我们默认旋转轴是过原点的，如果旋转轴不过原点，我们可以先把旋转轴平移到原点，然后再旋转，最后再平移回去。

另外一个值得注意的点是最右边的矩阵跟叉乘里边的 dual matrix 是一样的。

推导：
![Alt text](image-7.png)
![Alt text](image-8.png)
![Alt text](image-9.png)

这门课不会谈论四元数，在这里简单的说一下：图形学中四元数主要是用来解决旋转插值的问题。

## Viewing Transformation

### View/Camera Transformation

![Alt text](image-10.png)

现实中怎么拍一张照片：

- 找一个好的地方，把所有人都集合在那里摆好 pose（模型变换）
- 找一个好的角度，或者说找一个好的位置，把这个相机放好，往某一个角度去看（视图变换）
- 拍照（投影变换）
  图形学中也是这样的，拆分为三个变换模型：mvp（model view projection）

首先来看一下 view transformation：
怎么定义 view 的角度：
![Alt text](image-11.png)

- 一方面是向哪个方向看，即 look at
- 另一方面确定有没有一个自身的旋转，我们用 up direction 来定义

就像在摄影棚一样，把相机固定在一个位置和角度，在图形学中我们总是希望把相机放在原点，往负 z 方向看，y 轴向上。
![Alt text](image-12.png)

### 00:29:25,66

![00-29-25](tmp/00-29-25.jpg)

我们要把这个相机从任意的一种摆放

给放到这样一个标准位置上去

那咱们做一个一一对应就好了

那么这个相机原本它的中心在 e 这个位置

那那这个它的朝向是指向 g 方向看

并且上方向是 t

那么现在我们要把它给改成原点向负 z

并且向上方向是 y 那么怎么做呢

很简单

咱们一一对应就好

咱们把这个中心从这个 e 方向

先给移到零对吧

先先把这个 e 放 e e 这个位置啊

移到零

所以先把这个 e 做一个平移

那这个不够对吧

然后我还得把这个观察的方向

给旋转到负 z 上去

把这个 g 旋转到负 z 上去

大家看到这个红颜色的点啊

红颜色的这个向量

我把这个方向旋转成跟负 z 一样

把这个向上方向 t 呢给旋转到 y 方向

然后呢自然而然这个 x 方向也就对上了

没什么问题对

然后呢这个这就是基本的思想

就是说我们先把这个这个呃

摄像机给摆放好

o 那么对于这样一系列的操作

### 00:30:27,9

![00-30-27](tmp/00-30-27.jpg)

咱们如何把它给写成一个矩阵形式呢

其实挺简单的哈

大家这个呃应该还记得

我们先做什么操作呢

把这个 e 这个点就是相机原本的中心点

给移到这个原点上去

那么这个平移量自然就是负的

x e y e z e

那么就是一个简单的平移

那么在平移之后咱们再考虑这个旋转诶

大家这里就应该能意识到说

我为什么一开始先这个先这个呃

给大家这个思考这么一个问题啊

如果我们写一个这个矩阵

这个用齐次坐标写

是先做平移

还是先做这个其他的线性变换对吧

我们知道如果写一个矩阵

它是先做线性变换

再做平移

而这里呢我们先要做平移

所以先写出一个矩阵了

在他的左边

我们再单独写这个旋转这一系列的变换

那么旋转谁呢

我们把这个这个 g 方向也就是看的方向啊

look at 的方向

这个呃当做这个啊呃旋转到这个负 z 方向

然后把这个向上方向 t 旋转到 y 方向

然后 g 差成 t

那就是它的另外一个轴旋转到 x 上面去

那么这里其实是不好写

为什么呢

你要你要把一个这个这个任意的一个轴

给旋转到一个规规范化的轴

比如说负 z 是什么零零-1

对不对

你要把任意的某个什么 x g y g

z g 给旋转到零零-1

那么这么一个数不好写嗯

然后同样道理

t 旋转到 y 这后面这个旋转的 x 都不好写

但是有一个事情很好写什么呢

反过来写对吧

大家想一想他这个 x x 轴

x 轴是什么

100

咱们要把这个 100

可旋转到某一个这个这个点上呃

这个这个方向上去

这个 gg 乘以 t 然后呢这 g g 插成 t

它肯定能够写成某种 xyz 的一种表示方法

所以你只要把 100 给

旋转到那个方向上去

然后同样道理

010 旋转到 t

然后 001 旋转到负极就可以了

那么这里正是说

我要求这个原始的这个旋转不好求

那我们先求它的这个逆旋转或者逆变换

那逆变换很好写

咱们这就可以把它写出来

大家看到左下角这个方呃

这个这个矩阵

这个表示的就是这么一个逆变换

大家可以看一看

比如说啊大家可以看这个 100

如果说我们把这个啊

把这个矩阵应用在一个向量上

比如说 x 向量也就是 1000

没问题吧

第四维应该是零

因为它是向量

那么这个矩阵乘以 1000 之后

得到的是什么呢

得到的就是这边的第一列

也就是这个呃对应的这个 x y z

这个 g g 差成 t 这么一个向量

它对应的 x y z

那么说明这里是对的

那么同样大家也可以验证这么一个矩阵

是不是乘以 0100

也就是 y 是不是得到这一列呢

答案是是的

它会得到这么一列

然后也就是说

就是说左边这个矩阵它是相对好写的

也就是说我们实际要求的旋转矩阵

它的逆变换我们已经可以求出来了

那么我们如何才能得到他的这个他自己

这个这个旋转应该是什么呢

这里就要用到我们刚才这个课程

最开始给大家说的这个知识对吧

我旋转多少

这个这个从哪儿旋转到哪儿

这个不好写

我先算这个反过来旋转

那么我只需要对这个矩阵求个逆就可以了

怎么对一个旋转矩阵求逆呢

那这里大家会想到偶旋转矩阵是正交矩阵

所以旋转矩阵的逆就是它的转置

所以咱们把它直接转制过来

这里这个呃这个这个这个呃

我们要的这个旋转这里就可以得到了

没问题吧

哎也就是说我们通过这么一种简单方法

然后我们把这个这个问题先这个反过来解

然后呢我们再把它给变回来啊

那么回到这里啊

大家可以看到这个 r view

这个矩阵就是旋转的这个矩阵

我们已经得到了

那么配合上一开始的这个平移的矩阵

先把这个圆点对上对吧

先把它原本的中心移到原点

再做旋转

那么得到的这个变换

这个 mv 有这么一个变换

就是叫做这个这个视图变换

那么我们刚才说了

相机要通过这种变换

把它变换到一个这个所谓的一个呃

固定或者约定俗成的一个位置上去

那么其他所有的物体

也都需要跟着做这么一个变换

对不对

呃

因为我们为了保证这个相对运动不变

得到的结果不一样呃

得到结果一样对吧

然后就是说呃这呃这么一个矩阵到此为止

那咱们这个呃这个视图变换

咱们就已经说清楚了好吧

那么呃这里是一个简简单单的总结好吧

### 00:35:05,33

![00-35-05](tmp/00-35-05.jpg)

就是说这个我们任何时候

只要是相机和物体都应用同样的变换

或者说同样的移动方法

然后只要这个相机能够移动到一个这个

这个规定的位置上

那其他的其他物体自然也就落在了

他们这个需要的位置上

ok 然后呢这里需要着重给大家多说一点

这个呃旋转呢

呃呃不是旋转这个视图变换的对吧

操作的是相机

然后其他的物体跟着变换

那咱们刚才提到说这个相对运动

这么一个概念对吧

也就是说我移动这个移动完这些物体之后

呃

然后呢

我又把这些物体按照这个视角视图变换的

这么一个矩阵做了一次变换

因为它要和相机一块变换

所以大家会发现啊

不管是这个模型矩阵

就是我一开始怎么摆这个物体呃

还是说这个视图矩阵

我最后呢

都是把它给应用在这个物体上的对吧

因为只要做了这个操作之后

我立刻就知道好的

我的相机一定已经在这个呃

这个我之前设置好的位置上了

所以说这个这两个矩阵本质上做的事情

差不多一个意思

然后就是说模型或者视图变换

这两个变换经常在一起被大家称作模型

视图变换

也就是这么一个呃

这么一个这个这个这个定义的方法对吧

这个呃

那么大家可以看到这个 model view 之后是什么呀

大家还记得吗

mvp 对吧

p 就是 projection

咱们之后就要说这个投影

那就是说当一切这个相机的人已经站好

相机已经摆好

下面就是要做一个三维到二维的一个投影

变成一张图好

那么这这里呢就是说呃

我们之后就要立刻来说这么一个事情好吧

### 00:36:49,47

![00-36-49](tmp/00-36-49.jpg)

那到这里我先这个停一下啊

我来先看看大家有没有什么其他的问题好

我们看一看啊

啊

啊好好像这个有一个问题

就是大家有同学提到说这个啊

向上方向是什么

对吧啊

向上方向啊

咱们举个例子

就比如说我正常我这个脑袋啊

然后我再假如他是个相机

我在看一个什么东西

我看到这个照呃

如果如果说呃

我看到这个世界它是正的对吧

然后就是说如果我把我脑袋给骗过来啊

如果把脑袋偏过来

那我看到的就是一个偏着的一张一张图

那么同样道理对于相机也是对吧

相机也是

然后就是说如果我在相机上面

这个插一根这个草之类的东西啊

然后竖直的

然后我把这个相机这个呃旋转过来

大家会发现这个草跟着这个

这个这个相机在移动哈

这个草的朝向就是就是这个向上方向好吧

这个就表示了这个相机是怎么样旋转的

对吧

即便是你规定好了位置

知道往哪儿看

不同的旋转得出来的结果

肯定是这个这个旋转各不相同的好吧

或者你可以理解成方向盘的正中

然后它的向上的那个朝向

如果你旋转方向盘

那这个朝向就会这个也同样会被歪过来

对吧

道理是一样的好

那么就是说这里就是这个向上方向

那么嗯其他的问题呢

咱们之后再说好吧

那那这里这个我们就继续来进行

这个可能是这个课嗯最困难的一部分

但是如果这部分大家这个听下来

然后觉得没什么太大问题

那我觉得就挺好好吧

然后如果大家有疑问之后

这个也没有问题

先记下来自己的问题是什么

然后咱们之后再试图这个呃一点点解决

那么大家看这里咱们要说什么了呢对吧

要做这个投影投影

我们我们提到其实有两种不同的投影方式

诶

两种不同投影方式都是什么呢

咱们这个各做一个解释啊

一个叫 autographic

是指正交投影

然后另外一个 perspective 叫做透视投影

那么他们两个分别表示什么呢

### 00:38:56,83

![00-38-56](tmp/00-38-56.jpg)

大家可以看到这个这个就是这本书啊

就是这个 tiger book 这本书

他们这个这画了一个这么一个例子

这个例子非常不直观啊

就是说我在看一个立方体

然后这个可以看到这个这个不同的结果

左边和右边

他们两个分别用了两种不同的投影方式

然后大家可以看到啊

这这里这个嗯

嗯左边这幅图大家可以看到有一个现象

就是说我知道立方体啊

它这个不同的面

它有各种这个不同的这些这些平行线对吧

比如每一个面有两组不同的平行线组成

那么左边这幅图我看上去嗯

它这个原本说在这个面上平行的

这个线仍然是平行的

然后右边这张图就不是了

我看一个立方体

我会发现

如果我延长了两条这个这个对应的线哈

比如说这上面这个面

它它对边的两条线

然后我把它给延长

大家会发现它会相交在某一个点上

然后左右这两条也是大家这个把它给延长

会发现它会相交在这个底下这么一个点上

或者说素描啊

这这一系列的这些画画

大家就知道说这个人眼的成像吧

其实是更类似于右边这种

就是说右边这种就是所谓透视投影

透视投影呢会有一个性质

就是说你会看到平行线不再平行

他们都会相交到某一些地方去

当然这个事情说的这这个之后

我们会说的更多啊

就是说这个左边的这个这个呃正交投影呢

更多是用来做工程制图

然后但是这样说的话并没有说到本质

最本质的是什么呢

就是说正交投影

并不会给大家带来一种现象

叫做呃这个近大远小的现象

而这个呃透视投影会有这么一个现象对吧

大家知道有个成语叫做一叶障目

对不对

什么叫一叶障目呢

有一个叶子叶子多小啊

对不对

但只要它放的足够靠近人的眼睛

那他就会挡住这个所有视野对吧

道理就在这儿

然后呢

这个还有一个这个稍微通俗一点的

叫做道理我都懂

但是为什么鸽子这么大

这是个梗哈

这个这个诶嘿嘿嘿嘿

之后这个大家有兴趣自己查吧

然后就是说这里也是在说这么一个事情啊

当一个鸽子离你非常近的时候

你就会这个拍摄到一个超级大的鸽子

比背后的行人要大

那么道理就在这

这里

就是应用了这么一个这个这个透视投影啊

那么这两种投这投影本质的区别就在这里

是否有呃

这个啊近大远小的这么一个一个性质

那么我们反映在数学上

怎么样去说这个事情

然后那咱们这个呃

### 00:41:30,22

![00-41-30](tmp/00-41-30.jpg)

马上就这个给大家说这个事情好吧

那么这里是两个这个这张图啊

两张图来解释这个两种不同的投影

这里这个左边就是透视投影

所谓透视投影呢

我们就认为这个摄像机放在某一个位置上

然后摄像机我们近似

我们认为它是一个点

那么这个点我们去连出一个

在空间中的一个锥

好吧

这里是一个四棱锥

大家可以看到这个在四棱锥里面

我希望把这个四棱锥

从某一个深度到另外一个深度之间

的这么一块区域

这个区域我们管它叫 frost

把这块区域里面的所有东西都显示出来

然后呢这是透视投影的做法

那么相应的对于正交投影

它其实就是假设说我的这个相机

离得无限远好吧

离得无限远

这样的话就相当于是当我这个呃一个相机

这个比如说我从这个透视投影这里

把这个相机拿的越远

越来越远

越来越远

越来越远的时候

跟远处的平面就会越来越接近

越来越接近

直到你把这个呃这个这个相机拿到

真的无限远的时候

那就会发现近和远是这个完全一样的大小

那么这样投影出来大家可以看到

不论这个物体有多远

那得到的这个这个

这个就单讲这个场景来说啊

得到这些球的大小都是一样的对吧

那其实这是另外一种理解

那么就是说这两个呢咱们之后都会讲好吧

ok 然后呢

### 00:42:57,67

![00-42-57](tmp/00-42-57.jpg)

这里哎这个这个这个呃

咱们就从最简单的这个正交投影开始讲

那么正交投影呢这个很简单

非常好理解

我们刚才说了

它其实就是相当于是远处

不管远处还是近处

咱们一股脑把它给挤到这个某个平面上去

就可以了

那这个事情怎么样做呢

这个非常简单

首先呢我们先把这个相机放在一个位置上

大家可以看到这里

这个这个把相机放在原点上

往负 z 方向看

并且向上方向是 y 诶

大家会觉得很熟悉啊

因为这个相机这个摆放

基本都是这么一种摆放方式

然后这里最关键的一步操作

就是如果这么摆放

那么有一个好处

就是说把 z 坐标给扔掉

得到的结果

自然就是一张这个平面上的这个图了

就是 x 和 y 平面上的一张图

大家可以看到这个示意图啊

这里有一个三维空间中的字母 e

还有一个这个这个小方块啊

他们两个在不同的这个方向上

一个在这正向

一个在反向

然后呢呃只要我把它们对应的这些

不管是什么物体啊

这个对应的 z 给扔掉

那么只剩下 x 和 y

那得到的结果可不就是这个

大家看到 xy 上面这么这么一张图吗

那右边这里是一个侧面的这个观测啊

就是说我看的是 y z 平面

然后然后就是说如果我从侧面看呢

这个 e 应该在这这个小的这个格子在这

那我把这个 z 都给扔掉之后呢

可不是都被都被挤在这个 x 和 y 上面

得到的就是这么一张图

对吧嗯那么这里这个有同学会问了

那如果我要把它给这个 z 都给扔掉

我如何区分物体的前和后呢

这是个问题对吧

那这里之后我们再想办法去解决

然后呢这个啊这里没完哈

这个当你把这些这个这个呃 z 扔掉之后

所有东西都只都是在 x 和 y 上面的对吧

都在 x 和 y 上面呢

咱们再做一个基本的操作

不管它 x 和 y 范围覆盖多大

咱们都把它移到-1~1 乘

-1~1 这么一个这个小的这个矩形上

然后然后这样的话就可以得到一个这个

正交投影的结果

那至于为什么咱们要把它移到这个

-1~1

-1~1 呃

呃呃这个这这样一个这个矩形上面呢

这是也是同样是一个约定俗成的一个做法

就是说这样做可以可以方便之后的计算

好吧

那么这里是一个简单的理解方式

但在实际操作中

这个啊我们图形学上啊

这样操

这样操作

其实并没有我们要说的这一种操作来方便

### 00:45:21,8

![00-45-21](tmp/00-45-21.jpg)

所以说我们来给大家说一说

这个这个正式一点的做法是什么

好吧

那么我们的平行投影

实际上在做一个什么操作

首先我们定义空间中的一个立方体好吧

大家可以看到左下方

这里定义了一个立方体在这里

然后这个立方体很好定义

我们只需要定义说什么呢

定义立方体的左右在 x 轴上都是多少

然后下上在 y 轴上都是多少

然后远近在 z 轴上各占多大的范围

我们把这个立方体这个给描述出来

那我只需要这六个数对吧

xyz 3 个轴的范围

没问题

然后呢我们把这样一个形状给呃

试图给映射到什么样的一个形状呢

映射到右边这么一个最右边这么一个形状

就是我们管它叫这个正则或者规范

或者标准立方体好吧

然后这个英文叫做 canonical cube

就是说我们不管我给我什么样的一个空间

中的这个长方体

我都可以把它给映射成成

这么一个标准的立方体

那么这部分怎么做呢

那大家可以看到中间经过了这么一个过程

我们先把这个立方体的中心给移到原点

然后呢

我们把 x y z 的轴分别都给拉成这个负

1~1-1~1-1~1 不就行了吗

对吧

所以这样做其实非常简单

然后事实上来说呢

### 00:46:43,23

![00-46-43](tmp/00-46-43.jpg)

我们这个就是这么做

然后呢这里有两个事情跟大家提一下

第一这里和我们之前所说的这种

简单的把这个 z 给扔掉

这个呃是有一点这个不一样的地方

就是说我们先做这个呃

这个呃平移

然后我们再做这个呃

这个叫什么来着

这个缩放缩放

ok 然后这是第一点

这也是一个正规的做法

我们是这么个做法

然后第二点咱们回到前面一样

### 00:47:10,36

![00-47-10](tmp/00-47-10.jpg)

这里可以看到哈

在 x 轴上我定义左和右

那是因为它这个左比右小对吧

然后在 y 轴上我定义一个下和上

bottom top 嘛对吧

因为下比上小

然后在这里其实有一个并不直观的一个

这个定义

在 z 轴上

我们定义的是这个这个物体

离我们远还是近

但是大家会发现远近就是 f 和 n 啊

其实远呃和这个近

它们各自代表的这个 z 的这个值

大家可以看一下

这个 z 的方向其实是向 y 的对吧

我们是看着负 z 方向

所以如果一个这个呃一个面离我们远

其实意味着它的 z 值要更小

然后如果一个面离我们近

那就意味着它的 z 值其实要更大对吧

那也就是说呃这个圆其实是小于近的啊

这里是这么一个这个做法

这里的这个原因很简单

就是因为这个这个呃

我们是沿着负 z 方向去看的

就是就是因为是这么一个一个事情

因为我们为了保证这个右手右手坐标系

这也是为什么说这个呃这个呃啊

### 00:48:17,39

![00-48-17](tmp/00-48-17.jpg)

ok

这

这也是为什么说这个在一些这个图形学的

a p i 里面

比如像 open gl

他们会假设说我们用的是左手系

因为左手系在这一点上会相对方便一些

但它会造成别的问题

x x 乘 y 不等于 z 对吧

就是说这个好处坏处肯定都是有的

那咱们仍然坚持右手系

那就是这个意思好吧

那这个就是说对于我们正交投影来说

就是呃

我们会把任何一个这个形状给变成

这么一个这个 canonical 的

这个这个这个这个立方体啊

标准立方体好

### 00:48:51,52

![00-48-51](tmp/00-48-51.jpg)

然后呢

这个我们现在要做的

自然就是

把这么一个变换给写成数学的形式

用矩阵来做

那么这里就非常非常非常直观了对吧

怎么做呢

我就把这一个立方体

首先这个平移把它的中心啊

中心什么是中心呢

就是左和右的中心是什么呀

就是 l 加 2÷2 对吧

把这个中心移到原点

那就是沿着这个负的方向去移动

那同样下和上也是近和远

也是远和近也是对吧

我们先做一个平移

把这个中心移到这个圆脸上

然后呢咱们在这个在在这个呃做一个缩放

把 x y z 他们的这个宽度啊都给变成二

为什么变成二呢

因为-1~1 吗

它覆盖的范围是二

那它原本的覆盖的范围是什么呢

比如说左和右

那它覆盖的范围就是 r2 减 l 对吧

那我要把它给变成二

这就是我要在它上面乘以一个这么一个

缩放的因子

使得说这个最后我缩放完了之后

xyz 各自覆盖的范围都是-1~1 呃

所以说我们管它叫-1~1 的三次方

定义的这么一个这个标准立方体

那自然而然这个非常好写

所以说对于这个呃

这个这个正交投影非常简单

就直接写成这么一个形式

两个矩阵相乘就可以了

那么这里也就呃呃结束了好吧

### 00:50:09,0

![00-50-09](tmp/00-50-09.jpg)

然后这里之前

我这两点就已经给大家提过了

这么个事情啊

就是说啊

就是说这个首先一个是

因为我们是沿着负 z 的

所以说近其实大预言

然后呢

另外一个

这就是为什么像这个 open gl 类似的 api

他们用左手系

然后呃这个没有关系

然后所以如果大家之后涉及到

比如说作业啊或者干什么

可能在网上看到的结果

跟我们结果正好相反

这个是很很很正常的事情啊

也就是说这个考虑到大家用的这个这个

坐标系的不一样

还是有各种不同的好吧

那么这里就是这个这个正交投影

### 00:50:43,77

![00-50-43](tmp/00-50-43.jpg)

那么咱们这个呃好吧

再说这个透视投影之前呢

呃我我先看一下啊

大家有什么各种各样不同的问题

嗯好有同学问平移为什么是负的啊

平移是负的

是因为你要一个空间中的 x y z.1~0

那你可不是要按照负 x 负 y

负 z z 去移动它

它才能得到这个零对吧

这是一个另外一个说这个啊

有同学说啊

为什么不考虑旋转啊

这个事情就相对复杂一些

那么之后再说吧

那这个说嗯 ok 再看一下啊

哦说如果我们把一个这个原本的这样

一个长方体这个这个范围哈

然后如果我们把它给这个缩成一个立方体

那这些物体难道不会被拉伸了

会会一定会的

但是这个这就涉及到我们之后会说的

另外一个 b 变换

在所有的变换做完了之后

这个物体在这个呃

就是说所有物体都在这个-1~13 次方

这么一个这个立方体里面之后

还要做一个叫做视口变换的事情

这里还会做一次拉伸

所以说这个之后我们再考虑好吧

就是说这里不是问题

就是说做完了这个投影变化之后

确实这个物体是什么东西

不管它的长宽比原本是什么样的

都会被拉成这样一个这个这个呃标准

这个这个嗯立方体好吧

然后呢我看一下啊

这里啊变换

有同学问为什么不用坐标系来呃

坐标系的变化来解释这一点

其实是我个人非常反感的一个事情啊

个人个人啊

就是说这个我觉得变换一些物体什么东西

这些都相对好理解

变换一套坐标系

从一个坐标系变成另一个坐标系

导致其他的物体

这个坐标都会发生一系列的变化

这个我觉得不直观啊

不好理解呃

虽然来说本质上是一样的

没什么关系啊

ok 归一化的长方体怎么得到的啊

也就是一开始的输入对吧

一开始的输入是这个

当然是这个规定好的对吧

如果我们要对某个空间中的某一块儿

然后进行这个呃这个这个正交投影

那我们先把这块儿给规定好

我到底要要让它显示什么

这当然是我们自己说了算好吧啊

就是就是这么个意思

然后嗯精度上会有问题

这个之后我们会嗯不一定有时间吧

有时间我就会提这个事情好吧

那咱们这个就先说到这儿

其他的问题看起来相对复杂一些啊

然后这个嗯 o 嗯

那那咱们就继续说

那咱们刚才已经说了

正交投影

正交投影是相对简单的一个投影对吧

那咱们现在要说这个复杂一点的投影

但是咱们应该已经说明白

这个这个正交投影了

那么这个透视投影啊其实就并不难

首先透视投影是用的最广泛的一种投影

然后在各种各样的这个这个

图形学的应用里面

几乎都是这样的投影

然后呢近大远小满足这么一个性质

然后呢这个这个嗯他能够带来的视觉效果

就是平行线就不再平行了

大家可以看到这个 a b 这么一条线段

在投影到这么一个这个一个平面上之后

它就变得不再和这个之前平行

当然之前平行的线

现在看上去也不会暂时平行

这个呢

这个大家可以通过这么一个例子来看

### 00:53:47,9

![00-53-47](tmp/00-53-47.jpg)

首先呢在这个欧式几何

就是欧几里德规定的几何里面

但要是这个这个定义的清楚

什么是平行线永不相交的两条线对吧

然后那平行线永不相交对吧

这是对的真理对吧

那么在这张照片上大家会发现不对不对啊

这两条铁轨显然是平行的对吧

而且他们不仅在这张照片上相交

而且我还可以把这个相交的交点指出来

那就是在这儿

对不对

这个这个我们完全可以看得到

轻而易举的看到它确实会相交

在某一个点上

那这个到底是怎么回事呢

那也就是说啊在同一个平面里面

然后这个两条线段呃

呃两条这个平行线肯定是不会相交的

那么在透视投影的这个情况下吧

这个嗯一个平面

它相当于被投影到了另外一个平面上去

然后在这种情况下

它就不再是平行线了

这一点就是这个透视投影带给大家的一些

这个不同的地方

这也是为什么大家会觉得

这张图看上去很自然

那如果说真的用正交投影去生成

这么一张图

那大家就会看到非常不对劲的一个效果

就是这两个这个这个这个这个铁轨

是不是永远不会相交

这样大家反而会觉得别扭对吧

那么呃这里就是这么回事了

就是说欧式的几何

指的是同一个平面内的啊

那咱们这里是涉及到更多这个不同的平面

不同的角度

那么这个我们在这个

### 00:55:04,56

![00-55-04](tmp/00-55-04.jpg)

具体说这个事情之前啊

然后这里相对困难

然后我看一下啊

这节课不好意思

要不然的话咱们拿到下节课说

估计又得花更多的时间

那么这个呃不管怎么样吧

咱们希望把这个事情说清楚好吧

那我们在做这个透视投影的时候啊

有一些这个数学上的基础

我们需要这个再回忆一下

呃什么呢

就是我们之前说的这个齐次坐标

它有一个定义对吧

就是说我们看啊 x y z1

它当然表示空间中的点 x y z

那么只要我乘以一个 4%个数

都乘以任何一个 k

只要这个 k 不等于零

那么我这个 k x k y k z k 这个表示的点

它就也是这个三维空间中的 xyz 这么一个点

没问题

那么这里我们更进一步

那么我们既然可以说

那我乘谁不是乘呢

我我我乘以 z 好吧

x y z 我都还有那个一

我都让它乘以 z

那可不变成了 x z y z z 平方和 z 吗

那它表示的点还是这个空间中的 x y z 点

没有问题对吧好吧

那这个这个当然了对吧

因为 z 也属于任何一个数

这么一个范畴对吧

所以当然是可以的

那么我们为什么要着重说这个事情

是因为我们要用到它好吧

然后这个例子当然非常简单

1001 和 2002

表示的点都是同一个点

并且是 100 好吧

这个简单但有用

咱们之后就会知道

那么对于这个透视投影来说

### 00:56:34,35

![00-56-34](tmp/00-56-34.jpg)

我们怎么样去理解它对吧

我们回到这个透视投影上

我们刚才已经说了啊

这个这个叫什么来着呃

正交投影啊对吧

正交投影这个大家已经知道怎么做了

就是空间中的一个这个长方体对吧

我们规定一个这个呃

进和远这两个平面没问题

那么同样道理

我们刚才说透视投影怎么来的呀

是从一个这个呃一一个点开始

然后往外延伸出来一个四棱锥对吧

这个点就是我们的这个相机

然后我们现在认为哈

就是说我们从一个点往一个这个呃

这个方向上去看

然后同样我们定义一个进呃

和远这么两个平面好吧

然后在这里就是反应在左边这么一个东西

上面

这个这个叫做 frost 好吧

然后然后这么一个形状

也就是说大家可以对比一下

这个形状和空间中的一个这个呃长方体

它的区别是什么呢

首先都有一个近有一个圆

然后呢但是这个圆的这个平面

这个相对大一些

然后这个这个在这个立方体里面

这两个平面是一模一样的对吧

那么大家会发现

那这是不是就是它这个这个主要区别对吧

就是说大家可以看这个

透视投影和平行投影的区别

无非就是说这些线大家可以看到啊

这个上面这个这个 frost 也好

对右边的这个呃长方体也好

这个他这基本上要做的事情是什么呢

就是说把这个线的右边这头给投影到左边

这头就可以了对吧

我们要做的这个透视投影也是如此

对我们看到后面这些东西

为什么大的东西会变小啊

因为这些线都在往里收缩嘛对吧

然后它就会变成这上面这么这么几个点

好吧

就是相当于是大家看这几道线就可以看到

那么主要的区别是什么

这一目了然

大家可以看到

那么一个基本的思路就产生了

那么我们怎么去做这个透视投影

透视投影非常困难对吧

然后我们如果要直接写出来

当然是可以的

而且大家可能会看到很多图形学教材

就是在做这个这个直接写

咱们硬生生把这个呃这

个透视投影的矩阵写出来

但是我觉得这样不好理解

好理解的做法是什么呢

咱们假设说啊

大家能看到吧

这个我鼠标线的短暂停留一下

这么四个点

咱们把它往里挤

然后他们是这个在同一个高度上

然后就把它给挤成了一个空间

中长方体

没问题吧对吧

那所以说我们可以看这个呃

我们可以做这么一个操作

那做完这个操作之后怎么办

大家会看到这些线

然后经过

这个正交投影就可以把它给投影到这个

对不对

也就是说我们把这么一个透视投影的过程

拆成了两半

第一我们先把圆平面

以及它中间的这些位置

比如说像这个终点

它当然也要往里挤

然后这个靠近它的这个点也要往里挤

先把这个 frost 的形状给挤成这个长方体

然后我们再做一次正交投影

问题就解决了

那么正交投影我们知道怎么做

那么现在的问题就是

这这不给这个操作怎么做对吧

那呃这个事情呢

首先我们是口语化的定义

但是我们要把这个事情给说清

楚有有几点事情得规定

那么在挤的这个过程中啊

咱们定义几个事情

或者说规定几个事情

就是说我们对应这四个点

就是说这四个点在这个经过挤压之后

它仍然得是这四个点

它完全不会变化

而且任何一个点

其实这个平面上的任何一个点

在这步操作下都不会变对吧

那么这可以这么这么理解

那么呃远处的这个平面呢

远处的这个平面

大家可以看到这个它的这个呃 z 值是 f

然后我们还规定一点

它它当它挤了之

后呢它的 z 值仍然是 f

就是说它的 z 不会发生变化

它只是说在向向里面收缩好吧

在这个平面内向里收缩好吧

那那这一点我们也规定好

然后呢我们再规定一个事情

大家看这个中心啊

就单讲这个我鼠标线的悬停的这么一个点

那我挤了之后

这个是不是它还得是中心对吧

然后我认为这个中心点它也不会发生变化

那咱们就说了几个不同的这个

这个这个定义了吧

基本上把这几几个规定都给做到之后

那可能得到的

就是这样一个挤压的做法

就是一个唯一的一个解法

那么这么做就是有什么好处呢

咱们之后很快就会看到

那咱们再回到这个透视投影上来看啊

我们知道正交投影怎么做

现在的问题就是

如何把 frost 给挤压成这么一个

这个长方体

就这么一个事情

然后我们要求这个矩阵

这个矩阵写得清楚

叫做 perspective to autographic

就是从透视到正交结束了之后

我再做一遍正交投影就可以做做

做完整个透视投影

那咱们就现在针对性的做这一步

就是挤压这一步怎么做

### 01:01:36,92

![01-01-36](tmp/01-01-36.jpg)

那么这里怎么做呢

我们假设说我们

可以从侧面往里面看啊

往这个这个整个一个这个 frost 上面看

也就是说大家可以看到左边哈

这个点

这个点呢就是说我这个相机摆放的位置嘛

然后它向上方向是 y

他再往复这方向也就是右边看

然后也就是说右边看到的这么一个区域

这块的区域

就是这个我要看到的近和远的一半哈

就是说它其实这个下面这一半

也是应该画出来

但是只看这一半应该能说明问题

那么我想知道啊

对于任何一个点 x y z x y z

假如说它这个呃原本在 x y z

那么它经过了这个呃挤压之后

它

会变成什么点对吧

那么呃这里怎么样去理解呢

大家可以看这里

### 01:02:24,94

![01-02-24](tmp/01-02-24.jpg)

就是说大家看到这么一个点

这么一个点

这个嗯他会被挤压往下面去

### 01:02:34,45

![01-02-34](tmp/01-02-34.jpg)

这个点一样

也就是说这个点最终会移到和左边这个点

x primary primary prime 一样的这个高度对吧

没有问题吧

然后然后也就是说大家看到这一个

这是一个侧面的视图

也就是说

我可以找到一个 y 之间的对应关系

就是说大家看这幅图的时候

就会发现原本的 x y 和 z 别的我不管

我就只盯着 y 来看

我会看到一个

相似三角形在这里

这里相似三角形怎么形成的呢

我是沿着这个方向往这边看对吧

这这是一条边

我知道是 near

然后呢演的这么一个距离

我知道是是是这个范儿对吧

然后就是说近和远这么这么两个这个距离

我也都知道

那有这个相似三角形我就可以算出来啊

原来我原本的这个 y 经过挤压之后

会变成 y prime

那么 y prime 和 y 之间的关系是什么呢

也就是这么一条线段

和这右边这个长线段之间的关系

那么它们两个的比值根据相似三角

形我们知道一定是等于 n 和 z 的比值对吧

就是说它对于任何一个深度的 z 啊

不一定是这个范儿

对于任何一个深度的 z

然后它和这个 n 的比值

一定都等于这个任何一个 xyz 点

它的这个 y 的高度和 y prime 的比值对吧

那这样的话我就可以得到 y prime

就等于 n 除以 z 乘以 y

也就是说什么呢

也就是说任意一个点它的 y 会被如何挤压

这个事情是相对清楚的

因为其实从这个上面这个也可以看到

### 01:04:07,4

![01-04-07](tmp/01-04-07.jpg)

这些都是线性的变化的嘛

就是说只要给你任何一个点

你知道它的 xy 和 z

然后你就知

道他这个被挤压之后

它的 y 是什么

也就是说对于这个远处来说啊

它这个会被会被挤压的

和那个呃这个呃和这个近的这个点

它的这个 y 值相同

对不对

然后对于对于这些内部的点

然后它会经过什么样的一种挤压方式

都可以通过这么一个相似三角形算出来

### 01:04:32,30

![01-04-32](tmp/01-04-32.jpg)

并且都满足这么一个规律

好吧

那就是就是这里

我们先找到了一个对应关系

就是说经过挤压之后

这些点它们对应的 x 和 y 都怎么变

这里是看 y 那对于 x 是同样道理

那就是说我们可以得到啊

### 01:04:47,88

![01-04-47](tmp/01-04-47.jpg)

任何的这个呃呃给你 x

y z 经过了这么个挤压之后

用 n 除以 z 乘以它对应的 x 或者 y

就可以得到它的新的坐标

x prime 和 y prime 对

然后呢这里就是已经告诉大家很多信息了

为什么这么这么说呢

大家可以想

原本给你任何一个 x y z 这么一个点

你会把它变成这么一个 x 变成这么一个 y

而且 z 我不知道对吧

就是说我知道这个经过变换之后

x 和 y 都怎么变

z 不知道没关系

然后我就写 hno

我就是不知道

然后反正他是一个点

它最后肯定是一

那么我给你 x y z1

我左边乘上我们需要的那个那个挤压

的那么一个矩阵之后

一定可以得到这么一个值

现在这就是要用

我们刚才给大家说的这个事情了

就说这不是表示一个点吗

其次坐标表示一个点

那我把 xyz 和这个一

我都乘以某一个这个这个固定的一个数

得到的一定是同一个点

那咱们就把它都给乘以一个 z

那大家看到这四个项我都乘以一个 z

那 n x 除以 z

也就是它新的 x 乘以一个 z 变成了 n x

然后 ny 除以 z 乘以 z 之后就会变成 ny

但不知道不知道

乘以 z 之后还是不知道

然后呢这个这个一乘以 z 那就是 z 哎

也就是

说根据我们刚才这个对于任何一个点

我们知道它 xy 也就是上下这个如何挤压

就不涉及到前后如何移动

咱们不管就是上下如何挤压

我们就已经可以得到好 x y z

一会被映射到右边缘这么一个向量诶

那也就是说现在就是这么个事情了啊

我希望算出来它左边的这个矩阵是什么

它 4x4 的矩阵

它乘以这么一个向量之后

有三个数我都已经知道了

那么我是不是就已经能够填上这个向量里

### 01:06:33,42

![01-06-33](tmp/01-06-33.jpg)

面若干的这个这个这个这个值了呢

答案是可以的啊

然后呢这个大家可以看到这个

我们左边的有一个 4x4 的这个这个矩阵

乘以 x y z1

得到这么些东西

那么回忆一下咱们矩阵成怎么做呀

对吧

咱们看右边啊

四行一列

那么第一行第一列从哪儿来

从这个矩阵取第一行

从这个向量取第一列

也就是说有一个向量呃

四个数点成 x y z1

一定得等于 n n x 那那这个向量是什么呢

这个向量就已经非常明了了

只能是 n000

为什么呢

n 乘以 x 的 n x 后面的零乘以 y 得零

然后零乘 z 得零

0x1 也得零

ok 没有问题对吧

这样一来呢

就是说这个通过这一个数

我就可以看出来啊

第一行是 n000

那么通过第二个数 n y

我就可以知道这个矩阵左边这个矩阵

它的第二行一定是 0n00

同样的道理对吧

因为这个大家可以试点乘一下啊

0000 点成 x y z1

得到的结果就是 ny

然后第三行我不知道对吧

不知道没关系

那第三行不知道

我放在这儿

然后第四行我知道第三行我怎么知道呢

就是说什么向量点乘 x y z1

可以得到 z 呢

那就是 0010

对不对

也就是说啊

我们根据这个任意的一个 x y z

他们的 x 和 y 如何变化

我们就

已经能够推出那么多个

这个这个矩阵中那么多元素了对吧

那就只剩一行了

只剩一行嘛

咱们把这一行给填完

任务结束对吧

那么这一行大家可以看到

那势必要跟 z 有关系

那么我们我们刚才的这个这个推导

上来看哈

我们只知道说根据相似三角形

他这个原本的这个 y 和 x 都应该变成什么

新的 y 跟 x

那我们可不知道它 z 会怎么变

我们我们也从来没有规定说它的 z 不变

好吧

它们的 z 不变

而这也就够了

这就是我们现在需要的这么

### 01:08:40,14

![01-08-40](tmp/01-08-40.jpg)

这么两两个这个呃小的观察啊

虽然很小

但很有用

然后呢呃大家看这两个观察是什么呢

第一任何一个点

也就是说这个矩阵它对于任何的 x y n1

这样的点

为什么 x y n 一呢

对于任何的 x y n1

然后运算完了之后

一定还得到的是同一个点 xyn 没有问题

然后呢圆的平面两个平面

虽然它的 x y 会往里挤啊

但是它的 z 没有变化对吧

这也是咱们刚才规定的远处的这

个平面上

它的 z 经过变换之后也不会发生变化

那咱们把这两点给利用起来

那么怎么把它利用起来呢

### 01:09:28,16

![01-09-28](tmp/01-09-28.jpg)

啊大家可以看到这里

我我说如果说这个左边

这是一个这个通用的这个写法啊

那我把 z 认为是 n

也就是说对于这个 xyn 1

他永远会被映射回他自己

xy n 一就乘上这个矩阵之后

一定等于他自己等于他自己这事儿

可可是这没 5 万哈

就是说我只说他会表示相同的这个这个啊

相同的三维空间中的点

可是没说在齐次坐标下的表示一定得一样

对吧

那他自己 xy n1

那也可以写成什么呢

也可以写成 n x n y n 平方和 n 没问题吧

就是我把四个数都乘以 n

那我表示的点当然还是他自己 x y n

没有问题

所以把这一个向量是可以通过这个矩阵乘

映射成右边这么一个向量的

而这四个这这个向量

它们它们两个向量表示的都是同一个点

x y n

所以没问题

那么咱们现在再看这个信息

可以告诉我们什么呢

这个信息可以告诉我们哦

这个 unknown 这个数

现在它现在我们知道啊

对于一个这个呃给定的这个呃深度 n

那么呃我们

可以知道呃得出来的结果

左边就是这个向量 xy n1

左边乘以 m 之后

它的这个第三个数是 n 平方

那么我们可以把它写出来对吧

矩阵的第三行呃

四个数

这四个数乘以这么一个矩阵

得到的是这第三个数 n 平方

那么呃我们想象一下啊

这个 n 平方显然和 x 和 y 都没有关系

所以如果一个向量点乘这么一个向量

可以得到 n 平方的话

那么我前两个数必然得是零

它不能是任何的

比如说零点多少 x 加多少 y

它跟 xy 一定都没有关系

零零后面两个数我不知道

有同学说了

那后面两

个数会不会是 n 和一啊

因为 n 乘 n 得的平方一啊

不 n 和零哈

就是说 0x1 得得零

n 乘 n 的 n 平方加起来是 n 平方

可是这个事情说不准

为什么呢

你可以 a 等于零

a 等于零

零乘 n 等于零

然后 b 等于 n 平方

n 平方乘以一也可以得到 n 平方

所以说呃通过这这个一个性质啊

还不够还不够啊

就是说我们的第三行大家还记得吗

刚才这个矩阵缺第三行

通过这个方法

我们已经可以把它的前两个数都填成零了

那么现在就只有说这个这个 a 和 b

这两个数我不知道

但是没关系

我

知道这么一个式子了

已经就是零零 ab 乘以 x y n 一等于 n 平方

那咱们现在只用了一个性质

然后呃任意一个点

我们都可以通过他们这个在变换之后

不变这么一个属性

然后来这个推出这个两个数

那么别忘了咱们还有另外的两个数对吧

另外不是另外两个数

另外一个观察到的现象

### 01:12:27,27

![01-12-27](tmp/01-12-27.jpg)

仍然是这个满足这么一个性质的什么呢

并且咱们就取一个点

什么点呢

那

咱们先回到前面的这几页上面去啊

这个大家还记得吗

### 01:12:43,49

![01-12-43](tmp/01-12-43.jpg)

我们刚才说啊

经过挤压之后

但是有一个点很特殊

在这个中间的这个点上

它的 x y 都是零

经过挤压之后

它不仅他还在这个 x y z 上

x y f 上

它位置也没有发生变化

它仍然是 00f 对吧

所以 00f 这个点经过这个变换之后

挤压之后

它仍然是这个面的中心点

所以咱们再回到这一页上来看

00f 这么一个点

经过变换仍然等于 00f

并且呢咱们还回到

刚才这个式子上来看

大家看到 x y y z

一会被映射到这个最后一个数

得是 z 来看啊

这个这个数等于是 z

所以所以说咱们同样道理

00f 一映射回 00f 一之后

但不够

我们希望最后一个数是 f

那么就把所有东西都乘以 f

00f1

跟 00f 平方 f 表示的完全是同一个点

00f 没问题

所以呢咱们现在就看这个零零 ab 这个向量

也就是原本的这个啊

矩阵的第三行乘以这么一列

得到的结果应该是这么一个结果

那咱们可以把它展开

咱们也可以

把它给这个展开

那么我们就得到了两个式子啊

我们得到了一个式子跟 ab 有关

我们得到了另外一个式子

这个式子呢也是也也是跟 ab 有关

那么把这两个式子放在一块儿

我发现啊

近和远我们都知道那两个式子

两个变量我们当然可以解除

a 跟 b 都是什么

好到此为止

咱们终于把这个矩阵给填完了

哪个矩阵

这个 perspective to orthographic

也就是说

我们把这个这个这个

这个从透视投影的这么一个 frost

我先把它给挤成了一个这个长方体好

那么

我们把这部分完成了

完成的时候怎么办呀

还要继续做正交投影对吗

这也就是说我们先把这个矩阵呃

这个做完再做另外一个正交投影

结束了之后

这两个再合在一块儿

这就是我们要的透视投影

我们最终就可以把一个任何一个远处的

是什么点被投影到一个这个这个上面嗯

好

到此为止

咱们的这个这个呃透视投影

咱们就已经这个说完了

我这个给大家留下一个问题

而这个问题绝对不容易

那咱们这个

### 01:15:10,97

![01-15-10](tmp/01-15-10.jpg)

### 01:13:10,61

![01-13-10](tmp/01-13-10.jpg)

00f 这么一个点

经过变换仍然等于 00f

并且呢咱们还回到

刚才这个式子上来看

大家看到 x y y z

一会被映射到这个最后一个数

得是 z 来看啊

这个这个数等于是 z

所以所以说咱们同样道理

### 01:13:25,26

![01-13-25](tmp/01-13-25.jpg)

00f 一映射回 00f 一之后

但不够

我们希望最后一个数是 f

那么就把所有东西都乘以 f

00f1

跟 00f 平方 f 表示的完全是同一个点

00f 没问题

所以呢咱们现在就看这个零零 ab 这个向量

也就是原本的这个啊

矩阵的第三行乘以这么一列

得到的结果应该是这么一个结果

那咱们可以把它展开

咱们也可以

把它给这个展开

那么我们就得到了两个式子啊

我们得到了一个式子跟 ab 有关

我们得到了另外一个式子

这个式子呢也是也也是跟 ab 有关

那么把这两个式子放在一块儿

### 01:14:07,4

![01-14-07](tmp/01-14-07.jpg)

我发现啊

近和远我们都知道那两个式子

两个变量我们当然可以解除

a 跟 b 都是什么

好到此为止

咱们终于把这个矩阵给填完了

哪个矩阵

这个 perspective to orthographic

也就是说

我们把这个这个这个

这个从透视投影的这么一个 frost

我先把它给挤成了一个这个长方体好

那么

我们把这部分完成了

完成的时候怎么办呀

还要继续做正交投影对吗

这也就是说我们先把这个矩阵呃

这个做完再做另外一个正交投影

结束了之后

这两个再合在一块儿

这就是我们要的透视投影

我们最终就可以把一个任何一个远处的

是什么点被投影到一个这个这个上面嗯

好

到此为止

咱们的这个这个呃透视投影

咱们就已经这个说完了

我这个给大家留下一个问题

而这个问题绝对不容易

那咱们这个

嗯还是这么来看啊

### 01:15:12,67

![01-15-12](tmp/01-15-12.jpg)

就是说呃我们在这里呢

这个这个呃做了这么一个挤压的

这么一个过程中啊

我们一直在考虑说啊

对于普通的点 x y z 啊

它的 x 跟 y 要怎么变

它的 z 不变没错

那么我现在的问题就是说

对于中间的任何一个 z

比如说在 n 加 f 除以二

这个中间这个位置上啊

对于中间的任何一个点啊

然后呢对对于对于中间任何一点 x y

然后某一个 z 然后经过变换之后

然后它的 z 会变小还是会变大

还是会不变 o 所以是这么一个问题啊

它的 z 经过变换

经过挤压之后都没有发生变化

但是我的问题是对于中间的某一个点

然后他这个呃

经过这个挤压的这个变换之后

它的 z 到底会变小还是变大还是会不变呢

然后另外一点是这样

就是说涉及到小跟大这么个关系了

因为我们涉及到这个这个呃

往负 z 方向看啊

所以这个 n 其实其实这个呃小于啊

呃其实大于 f 哈对吧

所以这样比较容易混乱

那我问一个更直观的问题

就直接这么直接这么看

### 01:16:28,58

![01-16-28](tmp/01-16-28.jpg)

### 01:16:29,68

![01-16-29](tmp/01-16-29.jpg)

就是说当你的任何一个点 x y

然后 z 等

于二分之 n 加 f 就是在这个正中间的时候

然后经过这个挤压之后

还是会被推向圆的平面

大家回去可以思考这么一个问题

好吧

呃当然这个其实这么一说呢

就已经帮大家排除了这个点不动的可能性

哈哈哈哈啊对吧

我说 z 方向 z 方向不动的可能性

然后这个听上去有点不可思议对吧

我做这个挤压

为什么还会让这个中间的点

他们的 z 向前或者向后移动对吧

所以这个呃是大家之后可以思考的问题

大家可以把这个 z 显示的写出来

然后大家就可

以看到这个这到底会发生什么变化

是会变得更像 f 还是更像呃好吧

那咱们这个今天咱们就说到这

感谢大家这个持续的支持啊

咱们推了这么困难的一个

### 01:17:18,46

![01-17-18](tmp/01-17-18.jpg)

这个这个这个呃矩阵啊

当然如果大家能够理解这个那就太好了

没有任何问题

就是说这应该就是这么一个呃

我们前几节课

或者说整个一节课涉及到最复杂的推导了

很可能就是这个好吧

如果大家觉得有什么难度

没什么问题好吧

那么呃再重申一下作业零呢

咱们今天会这个这个放出来

然后我们的助教同学还在这个努

力的这个工作中好吗

然然后这个呃其他还有什么呢

我这样

我之后关注一下这个大家论坛上面

问题或者干什么

如果大家这节课有各种各样的疑问

欢迎提出

然后我和助教们都会这个

想办法来给大家讲解

那咱们今天就说到这儿啊

大家这个抓紧去吃饭啊

嘿嘿嘿嘿嘿啊

ok 那咱们下期再见啊

### 01:18:06,94

![01-18-06](tmp/01-18-06.jpg)

拜拜

### Projection Transformation
