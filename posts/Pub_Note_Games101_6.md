---
title: Games101 6.Rasterization 2(Antialiasing and Z-Buffering)
---

一幅照片就是所有到达感光元件所在的这个平面的一些光学的信息，离散成这一系列的图像上的像素
![Alt text](image.png)

视频实际上也是采样，是在时间中进行的采样，可能是每秒 24 帧图像连在一起播放。
![Alt text](image-1.png)

在图形学中有这样一个词叫 artifact，表示错误、不准确或者我们不希望看到的结果，就是一切我们觉得看上去不太对的东西。

![Alt text](image-2.png)
除了锯齿之外，还有一种 artifact 叫做 moire pattern（摩尔纹）：
![Alt text](image-3.png)
就是当我们对一个图像进行采样的时候，我们会发现一些图像上的纹理会变形，这也是采样带来的问题。

![Alt text](image-4.png)
再来看一个问题（Wagon Wheel Illusion），画了各种条纹的纸片，顺时针旋转纸片，会发现有些条纹看起来像是逆时针旋转的。这是因为人眼在时间上的采样跟不上运动的速度。

走样的问题本质是因为什么呢？
![Alt text](image-5.png)

- 其实相当于是信号（也就是函数）变化太快了，以至于你的采样的速度跟不上它
- 需要通过频域来分析这个问题

先看一下如何做反走样：
![Alt text](image-6.png)

- 在采样之前先做一个模糊或者说滤波（filtering），把三角形变成一个模糊的三角形，采样到模糊的边界才变成这样的粉红色。
- 也就是说对原始的函数或者信号做一个模糊，再去滤波，然后再去做采样，就可以解决锯齿的问题，也就是抗锯齿或者说反走样。

对比一下效果：

- 原本的采样效果
  ![Alt text](image-7.png)
- 反走样之后的效果
  ![Alt text](image-8.png)

![Alt text](image-9.png)

但如果反过来，先做采样再做模糊（blurred aliasing）
![Alt text](image-10.png)
这样走样之后又被模糊了，是不行的。

![Alt text](image-11.png)

- 为什么采样速度跟不上信号变化的速度就会产生走样？
- 为什么先采样后模糊达不到反走样的效果？

这就需要频域（frequency domain）相关的知识了。

这分别是正弦与余弦波：
![Alt text](image-12.png)

调整前面的系数，就可以得到不同频率的余弦波：
![Alt text](image-13.png)

- 频率可以用来定义正弦波或者余弦波的变化速度
- 频率越高，变化越快
- 或者说定义波的周期，周期是频率的倒数，也就是说每隔多久这个函数会重复一次

微积分里边存在各种各样的展开，其中有一个叫做傅里叶级数展开：
就是说任何一个周期函数都可以写成无限多项正弦和余弦函数的线性组合加上一个常数项。
![Alt text](image-14.png)
傅里叶展开与傅里叶变换是两个不同的概念，但是它们紧密相关。

![Alt text](image-15.png)

- 给定任意函数，都可以通过傅里叶变换变成另一个函数
- 反过来，也可以通过逆傅里叶变换变回原来的函数

前面的各个余弦函数，它们的频率系数是不一样的，它们代表不同的频率。也就是说任意函数都可以分解成不同的频率段

如果把这些频率段给显示出来：
![Alt text](image-16.png)

- 从上到下，频率越高
- 频率越高，需要的采样间隔就越小

我们来看一下在频率上走样是什么样的：
![Alt text](image-17.png)

- 采样间隔不够小，恢复出来的函数跟原本的函数差别很大。
- 或者说蓝色的曲线和黑色的曲线，用同样的采样方法得到的结果无法区分，这就是走样。

相关的还有一个重要的概念叫做滤波（filtering）：

- 从频率的角度上来说，滤波就是把一些频段的信息给抹掉

傅里叶变换可以把一个函数从时域变到频域：
![Alt text](image-18.png)

- 虽然图像本身不代表任何时间的信息，但是我们认为这个空间上的不同位置也算是时域
- 右边的频域图
  - 中心看作是最低频区域，周围是高频区域，然后亮度表示不同频率上的信息量。
  - 这里可以看到图像的大部分信息都集中在低频上，中间比较亮。（很多图片都是这样）
  - 为什么会有水平和竖直的一道呢？信号我们认为是周期性重复的，图片被认为右边界过后又重复左边的内容，这条边界上会有剧烈的信号变化，产生高频。不过我们一般忽略这两条线。

把图像的低频信息抹掉，只留下高频信息：
![Alt text](image-19.png)
其实高频表示的就是图像的边界（跟周围的像素发生了突变，信号变化大），这种滤波叫做高通滤波。

低通滤波：
![Alt text](image-20.png)

- 边界看上去就很模糊了
- 图像上的类似于水波纹一样的东西实际上是应用了一个不完美的低通滤波器产生的问题

去掉高频信息和低频信息，留下中间的频率：
![Alt text](image-21.png)

- 提取到一些不是那么明显的边界特征
- 中间大面积的相同色块被去掉

这个部分图形学不会讲太多，如果要学的话需要学一门叫做数字图像处理的课。

滤波从另一个角度分析，滤波又等于平均，又等于卷积（convolution）：

- 前面提到低通滤波器，就好像图像被模糊了一样，而模糊就是一种平均操作

卷积是什么呢？

![Alt text](image-22.png)
用这样三个格子的滑动窗口，覆盖的三个数和窗口所覆盖的信号的三个数做一个点乘，得出来的结果写回这个窗口的中心值就可以了。
![Alt text](image-23.png)
窗口不断地向右移动，就可以得到整个图像的卷积结果。
![Alt text](image-24.png)

![Alt text](image-25.png)

- 对两个信号进行卷积，就是对应到两个信号的频域上，是两个信号的频率的乘积。
- 所以也可以通过傅里叶变换先把信号变到频域上，然后做乘法，再变回时域

![Alt text](image-26.png)
- 对于上边的的例子，应用3x3的卷积核进行卷积操作
- 这里乘上1/9是因为要让整体的颜色值跟以前不会发生变化，不然会让图像变亮
- 这个滤波器叫做box filter，也就是一个盒子形状的滤波器，它是个低通滤波器

现在有个问题是，如果这个box在时域上变大了，它在频率上会怎么变化呢？
答案是，它在频率上会变小。因为这个box越大说明模糊越厉害，所以留下的低频部分就越小。


采样在频率上是什么意思呢？
![Alt text](image-27.png)
- 采样其实就是在重复频率或者说频域上的内容
- 要把这些函数变成一系列离散的点，就像是把这个函数乘上一个冲击函数一样
- 时域的卷积对应到频域是乘积，反过来也成立，时域的乘积对应到频域上是卷积。
- 在频域上就是把原始的频谱给复制粘贴了很多


### 00:55:10,17

![00-55-10](tmp/00-55-10.jpg)

是因为我们这这个这个采样啊

采样的这个这个不同的间隔会引起频谱

以不同的这个这个另外一个不同的间隔来进行移动

那如果说我的采样

假如说啊原本的这个函数

它的这个这个或者是信号

它的频谱长这样

然后我把它复制粘贴

按照这么一个不长来复制复制粘贴啊

大家可以看到啊

好我可以看到啊

这是原本的频谱啊

这也是原本的频谱

这左边也是原本的这个信号的频谱

没问题

那如果说我采样这个采样

率不足

或者说我采样的不够快

采用的不够快

就会造成一个问题

就是说这个原始的这个信号啊

它的这个复制粘贴它这个呃这个中间的间隔就会非常小

ok 就是说我采样的不够快

意味着我我的采样点之间的距离很大

然后对应到这个频谱的这个复制粘贴上

就是说原始的这个信号

它这个呃复制粘贴它这个频谱嗯

他自己的频谱啊

它中间的间隔就会越小

所以大家会发现食欲跟频率有好多相反的关系啊

你采样的越越这个稀疏

然后其实对应频频谱上他这个班级这个频谱的

这个内容就班尼特别密集

然后我就会发现单一的太密集了

就会发现一个问题

说这里原始信号的这个这个这个信号和我复制粘贴的这个信号

在这一块混在一块叠在一起了对吧

唉像这种情况下

我就说这种情况下发生了走样

所谓怎样在频率的角度上来说

就是嗯频率的这个这个频谱在经过这个复制粘贴

或者说班尼的情况下发生了这个混合

然后这种情况或者叫混叠啊

这种情况就是这个产生走样的原因好吧

然后那我觉得说这个是有道理的

为什么呢

大家可以想象一下

啊比如说咱们还是原原本一个三角形

咱们回到光栅画上来看诶

原始的三角形

如果说我这个下面有好多好多像素对吧

然后像素非常小非常小

然后那我这个去一个像素去采用对吧

相当于对这个同样一个信号

我采样的密集了诶

我看到的怎样的现象就会少很多

那如果我每个像素都非常大

像素跟像素中心间隔非常大

那就相当于我用稀疏的采样

那产生的走向现象就很严重

对道理就在这没问题吧

所以说那这就是一种对这个对这个走样现象的解释

那么咱们就可以通过这

个这个事情来分析

那什么是反走样好吧

咱怎么样

### 00:57:39,82

![00-57-39](tmp/00-57-39.jpg)

那咱们可以看看有几种不同的这个不同的做法

比如第一种其实已经跟大家说了啊

第一种就是说我可以增加采样率

### 00:57:45,59

![00-57-45](tmp/00-57-45.jpg)

增加采样率呢是这个终极解决办法对吧

比如说我的显示器

我原本显示器是一个古老的显示器

640x480 的分辨率

这个一个像素非常大

很明显可以看得出来对吧

那然后我要去用它去这个光栅化一个三角形

那当然看起来锯齿很严重

那我如果说我用现在的这个视网膜显示器

分辨率几千乘几千对吧

那

这种情况下像素就小一些

像素小一些意味着什么

像素跟像素之间间隔小意味着采样率频率高对吧

意味着在频频谱上

它频谱的班级它的间隔大就不容易出现这个这个频谱的婚礼

哎所以说呃这当然是一个解决办法

但是这个是嗯这个并不是这个这个呃怎么说呢

反走样要做的事情

因为你想啊这个反走样我们是在同一块屏幕上做的事情对吧

然后我不可能说我通过开启某个反走样的选项

我可以让我分辨率增加很多对吧

受制于物理限制

那它当然就不是我要的这个反走

样对吧好吧

### 00:58:44,98

![00-58-44](tmp/00-58-44.jpg)

然后呢这个呃另外一个做法就是说如何降低这个走样的这个问题

那我就是说我真的要做这个反走样

那么反走让大家回到刚才一开始这个课之前啊

咱们给大家定义这个这个反走样的一个操作

怎么操作来着对吧

先做个模糊再做采样

那这个有没有道理呢

那通过我们刚才的频率分析

我们这个这前面都是铺垫啊

算是这个意思

就是说通过前面的频率分析

我们就可以知道好

我们这个先做模糊再做材料

它是有意义的

然后对应到这个频率上来说

什么叫模糊模糊

就是说低通滤波对吧

什么叫低通滤波啊

就是说我把这个高频的信息先给拿掉对吧

这就是模糊好

那我们把它重新翻译一下

怎么做反走样

先把一个信号高频信息拿掉

然后再采样诶

### 00:59:39,54

![00-59-39](tmp/00-59-39.jpg)

为什么这样行

那咱们可以看这么一个例子

那对于还是对于这么一个函数啊

这个函数自己它就是对应到频谱

它就是中间长这个梯形

然后呢就是说大家还记得哈

如果说我原本的这种这种稀疏的采样

在这个地方会发生一个这个频率混叠对吧

那就那就会产产生走样

那么如果我们先对这个原始

信号进行一个模糊

也就是说我把它的高频信号砍掉

砍到哪了

砍到这个这个这个呃方块

这个虚线方块之外

我认为是高频信号

我不要了好吧

那砍掉了之后

那剩下的信号是什么呢

剩下的信号就是这样的一个一个形状对吧

这么一个形状的一个一个信号

然后我再以这个原本的这个稀疏的这个采样率来采样它诶

我发现在这个时候他这个这个这个信号

它它它对应的这个频谱在这个位置它就不再发生混叠了

诶是不是这么回事啊对吧

就是说这样一来哎我先去做一个模糊砍

掉高频

让这个频谱它覆盖的面小

然后我再以这个原本的间隔去复制它

就不会发生混叠了

那这就是我们的解决方法

反走样好

那这个就就把这个我们的做法啊

这个模糊操作和这个这个评委的分析结合起来了

那咱们再回到我们的做法上面来好

原本说我们这样采样

直接采样不出问题

### 01:00:58,88

![01-00-58](tmp/01-00-58.jpg)

那咱们现在这个先对这个信号做模糊

把这个三角形变成一个模糊的三角形

然后我再采样出来结果

那自然得到的结果就是对的了对吧

然后呢我们实际的操作中

### 01:01:08,86

![01-01-08](tmp/01-01-08.jpg)

实际的操作中我们用什么

这

个这个这个滤波器对吧

来进行一个信号的这个这个模糊操作

或者说这个卷积操作对吧

那这是一个问题

就是说我们回到上面来

### 01:01:24,61

![01-01-24](tmp/01-01-24.jpg)

那就是我我到底怎么才能把一个三角形变模糊对吧

这是大家要问的一个问题对吧

后面采样我知道怎么做

那就是说现在所有问题就在于我怎么做这一步这个滤波操作

把三角形变成模糊三角形

那很简单

那我就用一个呃一定大小的这个低通滤波器

对它进行卷积就可以了对吧

卷积也就是平均就是把一个这个三角形任何呃某一个位置的一个点

让我取周围的一块

然后把这一块的结果平均起来

唉这就是对这个对这个三角形进行模糊操作的办法

### 01:01:58,74

![01-01-58](tmp/01-01-58.jpg)

那么是取什么样的块呢

很简单

最简单的这个这个块儿

那在这个图像上对吧

最简单的一个块大家很好理解

就是一个像素

这一个像素自己它正好是一个小方块

然后这个小方块呢它这个就是一个 box filter

咱们之前说了对吧

它是一个低通滤波器

它起到的作用就是这个这个模糊操作

那咱们要怎么做呢

那其实就是说呃先做一个模糊操作

### 01:02:21,3

![01-02-21](tmp/01-02-21.jpg)

也就是卷积

那大家知道原本三角形它是

一个这个要么这个点在三角形里

要么三角形在三角形外对吧

它是一个这个二值的函数

然后现在呢我们就是说我们要把这个函数做一个卷积操作

用每一个这个像素对应的这么这么一个小的 box 对吧

我做一个卷积操作

或者说我求个平均

然后我再把这个球的平均值的中心采样

哎对对

其实不需要采样的

对平均值这个呃就是一个值

咱们待会儿会看的对吧

然后也就是说这里就是我们的做这个呃卷积操呃

不是不是做这个这个反怎样操作的基本方法好

我对于每一个像素我

把三角形求个平均值呃

然后我再做采样

那么这就是我们要做的事情

### 01:03:06,24

![01-03-06](tmp/01-03-06.jpg)

大家可以看到对于任何一个像素

我都知道这个三角形可能会覆盖

比如说要么完全不覆盖它

要么覆盖完

要么是一部分覆盖对吧

也就是说比如说我这里看到的都是不同的像素好

不同的像素

这个这个在这个像素里面

三角形覆盖了它的左上角

然后这里覆盖了它的一半

感觉他很多

然后呢我刚才说对于任何一个像素内部

我们都对这个覆盖这个面积啊

求一个这个平均对吧

比如说像这里

比如说覆盖了咱们

说 1/8 啊

那它的这个值就应该是这个 1/8 的这个亮度

然后呃呃然后这个呃然后这里覆盖了一半

那它的值就应该是一半的亮度

然后呃不是不是亮度啊

覆盖多少

就意味着这个就是就是就是说没覆盖的 7/8 啊

就是覆盖大概就是有这个 87%的 y85 的八是多少来着

12.5 对吧

87.5 对的这个这个白色

然后呢如果覆盖完了

那自然就是全黑对吧

那也就是说在这里我把这个呃呃怎么说呢

我把这个这个像素内部它的这个这个值诶

给这个平

均起来了对吧

这就是我们所说的这个卷积操作好

那么如果我们可以这么做的话

### 01:04:18,88

![01-04-18](tmp/01-04-18.jpg)

那问题就解决了

然后在实际中要如何操作啊

好吧

这个好像没什么办法啊

而且是这样

其实连这个第一部分都没说完的

好吧

这个感谢大家理解

那咱们刚才说到哈怎么怎么做来着对吧

把一个三角形

然后对于对于它覆盖的每一个像素诶

我都这个这个这个求一下它覆盖面的平均对吧

或者说没覆盖面的平均

然后但这事儿说着容易做

着难啊

怎么才能这个这个这个把一个三角形在三呃

在某一个像素里面覆盖的区域算出来

这个这个不容易对吧

这个而且说这个计算量也挺挺多的对吧

那呃怎么办呢

所以说人们研究出来的一种近似方法

所以说咱们现在把它给说清楚啊

就是说我们现在所要给大家介绍的叫做 multi simple anta 类型

也就是说用更多的这个采样点来进行这个反走样

那么那么它是一个这个对反走样的近似

它并不能严格意义上解决这个开某样的问题

那么他是怎么样工作的呢

就是这个 m s a a 怎么

样工作的呢

就是说对于任何一个像素里面

### 01:05:29,19

![01-05-29](tmp/01-05-29.jpg)

我原本不是这个

假如说我用这个这个一个一个一个点

这是我这个像素能裁掉的这个点对吧

然后我认为一个像素被我划分成了好多个小的像素

这个这个这个划分成好多小的像素

就好像现在大家看到这个这个像素被划分成了这个 4x46 个像素

然后呢呃然后呢每一个小的像素假如说它有个中心对吧

然后我可以这个这个嗯判断这些点是不是在这个三角形内

然后我们再把这个判断的结果平均起来

是不是就是我对这个这

个三角形对这个大的像素啊

它的覆盖区域的一个近似对吧

如果我有非常密集的点

比如说 100x100 个点诶

那我就可以得到一个相对准确的近似

那如果用 4x4 得到的不准确

但没关系

效果还是挺好的

### 01:06:18,60

![01-06-18](tmp/01-06-18.jpg)

比如说咱们看这个

看这个结果对吧

然后呢呃这里可以看到一个一个这个这个例子

什么例子呢

但是这个一个三角形覆盖了若干像素

每个像素挺大的

然后呢假如说我可以把一个像素内部多加一些采样点对吧

### 01:06:31,55

![01-06-31](tmp/01-06-31.jpg)

比如说我用到这个两个这个这个呃就是 2x2 的一个这

个这个更小的这些这些点嗯

然后呢这些每一个点我都可以判断是否在三角形内

那咱们挨个判断

比如左上角这四个小的点诶

这都没被三角形覆盖

所以覆盖率是零

然后这个得到结果是零

然后同样道理一直可以做做下去

考虑到这个像素的时候

咱们把它加入

这就考虑这四个点

这四点我会发现啊

刚才啊刚才会发现这四个点有一个点在外面没被覆盖

三个点被覆盖了好

那我就认为这个像素它在三角形对

如果说我要求这个三角形在这个像素内的平均的这个值

或者说覆盖

率

那它就是 75%

就是这么个意思啊

### 01:07:18,93

![01-07-18](tmp/01-07-18.jpg)

咱们可以继续进行

咱们可以看到这个这个像素呢

它我用了四个不同的点去感知是否这个像素

而是否这些点在三角形内

那我会发现有一个点被感知到

也就是这个点会在三角形内

然后其他三个都不在

那覆盖率就是 25%

然后就是说这个这个呃得到一个这个覆盖率相对较低的结果

也就是说我把这个像素的值写作这个这个像素

这个三角形在这个像素内的近似的覆盖率

也就是 25%到红色

然后就是通过这么

一种方法来做诶

所以说我们可以把这个这个呃那通过这么一种方法

然后我们可以做一个这个抗锯齿的这么一个效果对吧

然后在这里我们稍微停一下

是这么回事

首先呢有一个有一个这个这个概念得得这个说明白

我们刚才说了啊

这个 m s a a 通过更多的这个这个样本

然后我们来近似的是什么

近似的是第一步就是反走样的

第一步也就是模糊这么一个过程

然后呢模糊完了之后

就相当于是每一个像素内部

我已经知道这个三角形的覆盖率

我这个求了平均之后是什么

的

### 01:08:26,90

![01-08-26](tmp/01-08-26.jpg)

然后就会得到这么一个结果对吧

得到这么一个结果之后

算是第一步做完了

模糊操作做完了对吧

相当于是我用一系列的这个 box 去模糊这个三角形

这步做完了

然后咱们再采样采样很简单

这里就变得无比简单

因为一个格子它是同一个颜色

你采样在它中间

那它就应该是这种颜色

所以说得出来的结果就应该是这个结果

所以说在这里强调的一点是

m a n m s a a 就是说它解决的是这个这个嗯

对这个信号的模糊这么一个操作

这个这个这个操作

而下一步操作的采样

这

部分操作相当于是这个隐含在这个过程里面了

但其实如果大家认为真的下一步有一个采样没什么关系

所以也就是说 msa 绝对不是靠提升分辨率直接解决的这个走样问题

因为大家可以看到就是说我通过那么些采样点

增加了这么些采样点

我只是为了近似一个合理的这个覆盖率而已

并没有真的提高这个像素呃

这么些这个比如说屏幕上的分辨率对吧

它该这么些像素还是这么些像素

所以说通过这种方法来理解才是一个这个正确的

对这个反走样的理解没问题吧

就是说

嗯不是说通过提高了采样率而完成的

我通过那么多不同的这些点

仅仅是为了呃得到一个近似的这个三角形和覆盖而已好

那么说到这儿应该就比较明白了

所以这个呃这个 m s a a 基本就是这么一个工作原理

然后咱们看这个效果自然是可以看得出来的

### 01:09:58,9

![01-09-58](tmp/01-09-58.jpg)

这是没有这个抗锯齿的

然后这是有抗锯齿的对吧

所以这个效果挺明显

然后呢呃这里 masa a 说到这儿

### 01:10:09,93

![01-10-09](tmp/01-10-09.jpg)

然后咱们可以停下来做一个非常非常非常简单的思考对吧

说我这个通过 msa a 啊

然后呢这个这个这个这个呃可以得到

一个抗锯齿的效果

而且效果还不错

但是我们知道这个对吧

no free lunch 对吧

没有这个免费的午餐对吧

那么呃我们为了引入这个 m s a a

我们为了做到抗锯齿这么一个效果

然后我们到底这个牺牲了什么东西对吧

这个事情很很显然

这个这个大家应该这个一目了然的事情

因为我们用更多的点去测试是不是在三角形内对吧

那当然是增大了计算量

通过增大计算量

然后这个这个得到的抗锯齿的效果

而且增大了多少计算量

我其实这个可以说的明白对吧

比如说一个像素

我用这

个呃 4x4

那就是 16 倍的计算量

然后如果 2x2

那就是四倍对吧

然后就是说我这个通过这种方法呃

来来来做这个抗锯齿

那么现在多说一句

就是说啊人们都是这个很贪婪的

对不对

人们根本不希望用那么多的这个材料

这个这个数量去这个去呃

怎么说呢

就是说呃达到这么一点点这个效果

大家希望说这个我只需要用很少一点的这个这个采样的这些点

然后我也可以达到这个这个嗯比如说 4x4 这么一个一个格子

这个采样点的效果

嗯

我假如说我只想用八个零

对吧哎然后人们就会发现这个事情是可以的

而且事实上在工业界的应用上来说

人们用的并不是一个这个像素

咱们把它规则的划分成比如说 4x4 个点

取中间的一些这些这些更小的这些所谓此像素

它的中心不是这么做的

然后人们会用一些这个这个更加有效的一些图案

来分布这些不同的这些点好吧

然后把这些采样点分布在一定的这个这个图案上面

然后有一些点还会被这个临近的不同像素所附用

所以说通过这种方法来说啊

就是说这个这个大家就会可以看到

我们刚才说 m s a a 专门强调说他用的这个不同的这这这么些点数

不是说增加分辨率来解决这个问题的

那么通过这个工业界的做法

咱们可以得到另外一个体会

对确实确实是这样的

因为有一些这些采样点

它是会被各种各样不同的像素去复用

仅仅是为了通过这些点来去检测三角形的覆盖而已

所以说从这个角度上来说

这就是为什么我们可以用一个不规则的一个呃

这个这个分布来描述这个嗯

增加了这么些采样点

所以这就是为什么比如说大家打游戏的时候

大家会

发现好

我采用启用抗锯齿

我用 m s a a 的方法

然后我用这个四倍

然后我发现帧率往下掉的可没有

这个没有那么多

不会掉到原来的 1/4 对吧

道理就在这儿

但这个有很多的这些这个这个样本得到了复用

所以非常好

当然在这里

这个不给大家都说这个这个具体说它到底是一个什么样的分布了好吧

然后咱们在之后的这个光线追踪这块啊

给大家稍微说一说

这个涉及到一些随机数

或者涉及到一些这个怎么样去分布这个样本

才能达到一个最好的覆盖效果

咱们之后会

说然后另外一个事情给大家总结的事情就是什么呢

### 01:13:21,6

![01-13-21](tmp/01-13-21.jpg)

咱们这里提到了一种抗锯齿

但咱们这个课叫现代计算机图形学对吧

这个一种这个抗体是显然无法代表说现在腾讯学的我这个发展

然后呢呃我们这里就给大家介绍两种吧

这是我个人的理解

就是说抗锯齿方案有特别特别多的抗锯齿

不同的抗锯齿的方法

我给大家提另外两种

一种叫 fx aa

一种叫 ta a 我认为这两个是算是这个除了 msa 之外最重要的两个了

而且个人意见哈

就是说而且这两种方法呃得到了工业机的广泛应

用那所谓 fx aa 是一个缩写叫 fast approximate

aa

就是说这个快速近似抗锯齿

他怎么做的呢

它和这个这个呃增加这个样本数就没有任何关系

它是一个图像的后期处理

就是说我先把这个这个这个一个这个有锯齿的这个图得出来

然后我再做做一种什么样的操作

然后我把这个锯齿给弄掉对吧

是这个意思

但是大家大家还记得吧

如果我先得到一个有锯齿的图

我再去对他做这个模糊操作

这是不对的

咱们一开始就已经说了对吧

然后大家有兴趣的同学也可以从这个频率的分析上来看

那

么咱们再回到这个 fx a a 上

他怎么做的呢

很简单

这个得到一幅图有锯齿

然后他把这些边界都给找到

通过一些图像匹配的方法找到

并且把这些边边界给换成没有锯齿的边界

简单吧这么一个操作

而且非常非常快

所以说它是一个和采样无关的

它是另外一个在图像层面上做的这个抗锯齿

然后效果挺好的

然后呢这个 t a a 是什么东西

ta 是最近几年才刚刚兴起的一个这个抗锯齿的方法

但是非常非常简单高效

什么呢

大家从 t 可以看出来

这个 t 叫 temporal

temporal 的意思就是与时间

相关的

然后意思就是说我怎么样去做抗拒什么

我去找上一帧的信息

咱们比如说这个意思啊

比如说这个我们还是用这个像素呃

内的一个点

一个点没有做 m s a a 来来来感知是否在三角形内

然后假如说我们看到的不是一个运动的场景

假设说一个静止的场景

相邻两帧显示的东西一样

但相邻两帧我可以用一个像素内部不同位置上的点

来感知这个三角形呃

这是我在三角形内

那大家会发现这个这个在时间范围内得到了这个静态的

这个场景的图啊

会各不相同

在这个边

界上有一些之后出现了边界

有的时候没出现边界

然后这个 temporal aa

他的这个思想就是说我复用上一帧的这个这个这个感知到的这个结果

然后就是说上一帧的这个每个像素的值在这周还会继续发挥作用

然后被应用进来

然后就就是说这相当于什么呢

相当于是我把 m s a a 对应的这些样本给分布在了时间上

然后并且在当前这一帧来说

我没有引入任何额外的操作

所以这是一个非常这个这个这个聪明的做法

当然了

对于这个运动的物体怎么办

这个咱们之后在这个实时光

线追踪上给大家说好吧

因为那个用的核心思想其实和这个呃 temporal aa 的思想一样

这里多说一句哈

对于这个工业界

它是美国的工业界来说

这个 temporal aa 大家都倾向于念成 temporal aa

因为 temporal 本身还有这个暂时性的这么一个意思

所以大家为了区分这个意思

大家把这个这个音译读了

这个读成这个 temporal

所以人家这么说

说了一个事儿啊

好然后呢这个啊这里再多说一句

### 01:16:46,66

![01-16-46](tmp/01-16-46.jpg)

就是算是今天的这个内容总结吧

就是说嗯在这个提到这么一个抗锯齿这么一个概念的时候

一定还得提另外一个和他很相

似的一个概念叫做 super resolution

其实相当于这个中文叫做超分辨率

所谓超分辨率的概念和抗锯齿就不太一样

但是本质是相似的

就是说超分辨率什么意思

比如给给大家一张图

比如说是 512x512 的

我们要把它给拉搭乘 1024x1024 的

然后但是呢大家知道如果把一张小图给拉大

那看的全全都是锯齿对吧

然后就是说我想把这张图拉大

但我又不想让他看到这个锯齿对吧

那其实说白了是什么呢

说白了其实就是说呃大家有一幅这个呃高分辨率的图

但是你的这个采

样的这个这个率不够

就是说你高分辨六的图是 1k 乘以 1k 的

可是你采样到的结果只有 512x512 的

你想把这个高分辨率的图给恢复出来

所以可以这么理解

从这个角度上来说

那这个超分辨率这么一个过程和这个这个这个嗯怎么说呢

就是说这个这个我们的抗锯齿这么一个过程

或者说 m s a a 这个抗锯齿的这个过程

这是非常相似的对吧

都是要解决这个样本不足的问题

这里就介绍一种这个做法

叫做 d l s s

然后咱们把这个这

个呃这个超分辨率这个过程做出来什么意思

就是说原本有张小图把拉大了之后

那肯定有些细节缺失缺失怎么办呀

没关系

咱们猜出来就好了对吧

猜出来怎么猜呀

什么技术适合猜呀

这个事情相信大家都比较熟悉对吧

一切涉及到猜测的这些技术

然后我们可以给他足够的这个经验性的东西告诉他啊

出现在在任何一个局部

然后我应该如何把细节补上去

一个一

那我刚才就是说这两个事情不是一回事

但是本质相同好吧

那这个好吧

没办法

因为这个内容相对来说难一些

然后又多一些

然后咱们就说到这儿

而且还没时间说这个怎么样去呃

考虑这个深度测试

以及这个这个这个嗯就是遮挡啊这一系列的事情

那咱们就留到下节课了来再说好吧

那这节课到此为止

那关于抗锯齿这块

那咱们就已经完全说明白了

说的内容相对较深

然

后这节课难

然后咱们这个之后如果课后大家就愿意多花点时间

这个这个多看一下这个这个视频

唉也欢迎大家这个呃踊跃讨论好吧

ok 那咱们这个就暂时说到这好

然后之后这个嗯就交给我们的技术秘书同学

然后这个各位同学这个赶紧去吃饭啊

### 01:19:43,44

![01-19-43](tmp/01-19-43.jpg)

实在是不好意思行

ok 那就说到这儿

咱们下节课再见啊

宝贝啊

拜拜拜
