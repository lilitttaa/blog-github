---
title: Games101 17.Materials and Appearances
---

## Materials and Appearances

![Alt text](image.png)

- 外观是光线和材质共同作用的结果
- 为什么海浪可以看透过去，深海浅海颜色不一样？
- 为什么我们能看到洞穴中一束光打下来？这说明有光线被重新导向打到了人眼，这个现象叫做散射。
- 为什么头发周围这一圈透光性特别强？
- 为什么我们一眼就知道这是布料，这是金属？
- 为什么蝴蝶的翅膀由各种各样的鳞片组成，为什么叠起来之后会显示出不同的颜色？
- 为什么我们能看到彩虹现象，为什么更多的高阶的彩虹我们就看不到？
- 光线打到鱼肉上，为什么会有透明的感觉，但又不是完全透明？这个叫次表面散射。
- 自然界的材质何止成千上万，但是我们现在接触的渲染器支持的材质种类有限，比如蒙塔数码的蒙多快渲染器支持 40 种材质（这可能是世界上最强的渲染器了）。

![Alt text](image-1.png)

- 材质就是 BRDF

![Alt text](image-2.png)

- 认为空间中从任何一个方向进来的光，它的 radiance 都是一样的，也就是所谓 uniform 的。
- 因为是漫反射，所有反射出去的光也都是 uniform 的

![Alt text](image-3.png)

- 因为入射光是 uniform 的所以与$\omega$无关，brdf 也是个常数。所以可以把这两项从积分中提出来。
- 对 cos 在半球上积分得到$\pi$
- 如果我们引入$\rho$，$L_0 = \rho L_i$，那么$\rho L_i = \pi f_r L_i$，所以$f_r = \frac{\rho}{\pi}$
- 这个$\rho$就是我们所说的反射率，它在 0~1 之间，可以是单通道的，也可以是三个数，也可以是光谱。

![Alt text](image-4.png)

- 有一点镜面但又不是完全的镜面反射的材质，这个叫做 Glossy

![Alt text](image-5.png)

- 一部分光线被反射，一部分光线被吸收，一部分光线被折射。这种材质通常是玻璃或者水。
- 左边的光会进入 water 材质里边，也就是有折射，这也是为什么我们能看到水里边的灰色。

![Alt text](image-6.png)

- 完美的镜面反射，入射角等于出射角。
- 根据平行四边形法则，入射光方向加上反射光方向等于法线方向。
- 或者也可以从俯视角向量相反的角度来看。
- 这其实也是为什么在 Blinn-Phong 模型中，我们计算的是半向量而不是反射方向，因为反射方向计算起来麻烦一些。

就能得到这样一个效果：
![Alt text](image-7.png)

- 所有反射都能用 BRDF 来描述，但是镜面反射的 BRDF 要写起来并不容易。里边涉及到 delta 函数，这里就不多说了。
- 它的分布集中在镜面反射方向上。

下面是关于折射（refraction）：
![Alt text](image-8.png)

- 平行光经过棱镜折射后，不同波长的光被分解成不同的光线。
- 折射现象在这个光的色散现象中仍然是采用几何光学的形式来描述，没有涉及到波之类的。
- 下边水底这个现象叫做 costics（国内翻译为焦散，但是这个翻译不合适，因为这个现象只有聚焦没有散射）。
- costics 是因为光线打到海水表面，海水表面凹凸不平，光线会往不同方向折射，对于海底的某一个点来说，它有几率接收到来自不同方向的光线。对于 Path Tracing 来说，这个现象是灾难性的考验。

![Alt text](image-9.png)

- 又叫折射定律，指入射角和出射角的正弦与折射率满足一定关系。
- 钻石的折射率非常高，也就是说光线进入钻石后会被折射的非常厉害，这就是为什么我们看到钻石会有各种各样的颜色。

![Alt text](image-10.png)

- 这样我们就能把折射角给算出来
- 如果根号内的式子小于 0，那么就意味着折射不可能发生。也就是右边这一项大于 1。又因为$1-\cos^2\theta_i$不可能大于 1，所以只有可能是折射率的比值大于 1。
- 也就是说从一个密介质进入一个稀介质，可能会发生全反射现象，此时没有折射。

如果把这个现象反过来，这个现象叫做 snell's window/Circle：
![Alt text](image-11.png)

- 只有锥形区域的光线能够被看到，这个角度有人算出来是 97.2 度。
- 全反射现象很容易发生，之前光线追踪的时候为什么没有遇到？是因为球有很好的对称的性质，所以折射进去的光线一定能折射出来。但是如果是复杂的形状，比如兔子，那么就有可能发生全反射。
- 折射也得对应一种 BRDF，这个 BRDF 叫做 BTDF，也就是 transmit，表示折射。
- 不过我们平时很少严格区分 BRDF 是指反射还是各种反射折射都包括在内。

Fresnel Reflection/Term（菲涅尔项）：
![Alt text](image-12.png)

- 垂直往下看，没有什么反射。但如果是斜着看，就会有反射。
- 也就是说有多少光被反射是和入射光的角度有关的。
- 菲涅尔项解释了有多少能量发生了反射，有多少能量发生了折射。

![Alt text](image-13.png)

- 这是绝缘体的情况
- 如果入射角度和法线垂直，那么就认为大量的能量会被反射掉，反之大量能量会折射。
- 简单提一下，另外两条线表示所谓的极化的性质，与光的波动性有关。我们平常不用管这个极化现象，目前也没有什么渲染器真的在考虑极化。

![Alt text](image-14.png)

- 这是导体的情况
- 这也反映了为什么我们用银质的镜子，因为银质的镜子在任何情况下都有很高的反射率。

菲涅尔项的计算：
![Alt text](image-15.png)

- 菲涅尔项得到的就是一个反射率，它是一个 0~1 之间的数。
- 根据不同的极化，会得到不同的反射率。我们不考虑极化的话，就是把这两个反射率平均一下。
- 不管怎么复杂，菲涅尔项一定和入射光的角度有关，也和折射率有关（也就是 n1、n2）。
- 人们通常会用一个简化方法，叫做 schlick's approximation，也就是说我们把这个菲涅尔项近似成一个一维的曲线，这个曲线在 0 度的时候是某一个值，然后在 90 度的时候是另一个值，然后在中间的时候是一个曲线，这个曲线是一个比较好的近似。

### Microfacet Material

![Alt text](image-16.png)

- 就像在卫星图里看地球，从远处看，地球是一个平面，但实际上地球是有山有建筑，有这样的高低起伏的。
- 也就是说，我们认为地球是一个平面，但它也能把光导向不同的方向。

所谓微表面模型也就是这个意思：
![Alt text](image-17.png)

- 近处凹凸不平的几何，远处可以看作是粗糙的平面。
- 对于近处的表面我们认为它是完全的镜面反射。
- 所谓漫反射就是在近处的这些“小镜子”方向几乎是随机的，也就是说它会把光线反射到四面八方。
- 这些微笑的镜面也有自己的法线，也就是说每一个微表面都有自己的朝向。我们可以关注这些微表面的法线分布。

![Alt text](image-18.png)

- Glossy 材质法线基本是集中在朝上的方向
- Diffuse 材质法线分布分得开
- 也就是说微表面模型利用了这个思想，用微表面的法线分布来表示表面的粗糙程度。

![Alt text](image-19.png)

- 我们现在主要关注上面的三项
- 首先是菲涅尔项，根据不同的入射方向有不同的反射率，也就是考虑了反射的能量。
- 然后最右边的 D 项，这部分考虑了法线的发布，也就是把入射方向和出射方向的半向量带入到法线分布函数里边。这个函数会告诉我们有多少微表面能够把入射方向的光反射到出射方向上去。
- 中间的 G 项，这个项考虑了微表面之间的遮挡和阴影，也就是说有一些微表面会挡住另外一些微表面，这样就会有一些微表面反射不出来。什么时候容易发生这种自遮挡呢？就是当光线几乎是平的打到表面上的时候，也叫做 grazing angle。

微表面模型可以得到非常高质量的渲染效果：
![Alt text](image-20.png)

- 这里的木头需要提一下，要描述它还需要基于微表面模型再引入一些别的东西。
- 这个模型无论是在电影还是游戏中都是非常有统治力的。


当然微表面模型有自己的问题

比如说他的 diffuse

像这个这个很少

就是有时候这个呃人们需要在上面额外的加入一些这个呃

漫反射的东西

然后当然这样就不是基于物理了对吧

然后就是有很多各种各样的这个这个呃做法

那么这里

呢再给大家多说一句

就是所谓这个微表面模型呢

这是一个统称啊

统称有很多不同的微表面模型

比如说 cook torrence 模型

比如说 word 模型

就有很多各种各样不同的模型

但都遵守这个呃微表面这一套好吧

然后这个呢咱们下节课也会稍微给大家再多说一些

这个这些各种各样不同的这个微表面模型好

那么呃当然这非常厉害

### 00:57:24,53

![00-57-24](tmp/00-57-24.jpg)

那咱们下一个话题给大家多说一点

就是这个嗯什么呢

另外一种区分材质的方式

我们刚才其实已经在用这个概念了啊

咱们看这幅图

这个图是在干什么呢

### 00:57:37,76

![00-57-37](tmp/00-57-37.jpg)

这个

图是一个电梯间的内部啊

咱们把这个事说清楚

电梯间的内部

那么电梯间正常大家都知道是四面

几乎全是金属对吧

那金属的话是平面对吧

然后呢这样的话

如果说我有这个头顶上有一些小灯

而电梯间就是这样的对吧

一些小灯它会打到这个金属的表面上去

它会形成高光

那是肯定的对吧

那新生高光大家说这个我们学过高光呢

这高光可不是出来应该是一个圆或者一个椭圆嘛

那怎么会得出来会是这么一些这个这个神奇的这些

直接一条一条的这种现

象咱们先不考虑多次这个反射

就考虑一次

就考虑直接光照

这种情况下

这个为什么会看到这种现象呢

那如果有同学仔细看这个这个材质的话

大家会会看出来一些问题对吧

那首先肯定是因为材质

因为因为说这里面就是看到不同的外观

就是因为不同材质嘛

咱们从一开始就在说

那么这个材质到底发生了什么

难道它不是金属吗

它是的

但是它有一个什么问题呢

它是一个被磨过的金属

大家如果仔细看

从这个图上都可以看得出来

它是沿着这个向下方向上下方向啊

它是这

个这个这个这个往往一个方向磨过的金属

所以如果从微型微表面的结构上来看

你会看到说哦它基本上来说从上到下它是一条沟

一条沟一条沟

这样这样形成的一个金属表面

它不是一个平滑的哎

这种情况它就会造成这个非常非常奇怪的

这个或者说看起来很很不错的这个这个嗯叫什么呢

就是奇形怪状的高光啊

这个这个非常有意思

那这个怎么怎么回事啊

这就是我们要给大家说的呃

区分材质的这个一类的方法

什么呢

就是我们把材质分成两类

一类叫做各向同性材质

一类叫做各项异性材质

就所谓 iso tropic 是各项同性

an isotropic 是各项异性

那么从这个意义上来说

大家第二次接触这个概念了对吧

咱们一开始在说这个各项异性过滤对吧

我们提过这个事情对吧

这个各项异性过滤是什么意思来着

我们不是说这个它可以支持这个这个长方形的查询对吧

然后就是说不一定要求正方形

那么同样道理啊

这个各项同性各项异性其实这个在图形学里面

这个基本体会的意思是一样的

所谓各项同性就是我们认为它的微表面并不存在一定的方向性或者方

### 00:59:52,63

![00-59-52](tmp/00-59-52.jpg)

向性很弱这个意思啊

然后比如说啊咱们看这个这个物体的表面

然后但是呢如果我们显示它的这个法线的分布

我们会发现哦

就是说它没有一定的方向性

那么对于刚才电梯间

很明显水平和竖直方向完全不一样

对不对

那如果说找一个这个这个物体的面的法线

然后这个呃不是找一个

就是把这个整成一个面

它的法线分布画出来

你会发现法线分布也是具有明确的方向

性对吧

这就说明从微表面的方向性

我们就可以看出这个材质它是属于各项同性还是各项异性

而且各项异性呢它会有各种各样不同的神奇的性质

好吧

那就是这个意思

那各项异性呢

### 01:00:44,33

![01-00-44](tmp/01-00-44.jpg)

我们这个呃这个具体上来说反映在 b2 df 上是怎么回事

那也就是说 b2 df 原本是两个方向的函数对吧

c 大对吧

c 大呃不 set down fc 到 c 的 fi 这个输入方向

c 大 r fr 是输出方向

哎

这是整个的 b2 df

如果这个 b2 df 它不满足说在方位角上旋转

然后得到的还是相同的 b2 df

我们就管它叫做这

个各项异性的材质

什么叫在方位角上旋转

很简单啊

大家假设说是这样哈

就是说我我现在这个有个平面

然后我的入射角和方跟出射角是这样的啊

这这样一个这个这个这配置啊

现在就假设是这样

然后呢如果我是这么旋转

你会发现啊

这个入射角和出射角的这个方向啊

它们的相对的方向几乎没有变化对吧

只是说他们的方位角都在都在进行着旋转

也就是说如果我认为我这么旋转这两个这个弱热点方呃

和入射的这个方向和出射方向的话

如果我旋转之后

我看到的是相

同的 b2 df

那它就是 iso topic

就是各项同性

如果说他们不止和相对的方位角有关

还跟绝对的方位角有关

那也就是说这个 b2 df 就是各项异性的

那这是从 b2 df 的角度上来考虑

这个从微表面也可以考虑

从 b r d f 也可以考虑

没问题

那这样的话咱们看两个例子啊

这个球很显然左边这个球大家看到这个高光很熟悉各项同性

然后这个高光形成了一个圈

看看非常神奇对吧

然后这个这块儿就是各项异性

那么对于这个门把手来说

大家可以发现啊

他异性的地方还不一样

它是

一溜一溜的拥有各自不同的各项异性属性对吧

可以看到这么一个性质

然后这个 cd 上也可以这么理解吧

但是正常情况 cd 我们会认为它是另外的一些性质来解释啊

咱们这个不多说啊

各项异性从 b2 df 角的角度解释

就是这个意思和方位角

绝对方位角有关好

那么大家可以看到在生活中啊

### 01:02:39,26

![01-02-39](tmp/01-02-39.jpg)

有很多各项异性的材质几乎是人造的哈

就是说这个大家可以看到这个锅的底对吧

这个锅的底大家很明显

这个这个自己应该都观察过

很明显大家知道他是怎么被刷的对吧

肯定是绕着

这个连心这一圈一圈一圈这样被刷的诶

正是因为他这么一刷

使得它任何一个地方有这个呃这个这个所谓的各项异性

你就会看出这种辐射状的高光对吧

这就非常有意思

那左边这里呢大家看到这个这个这块形成了一个竖条的这个高光

那这个跟这块就不一样对吧

那所以说就是说我们通过它这个这个长成什么样子

我们其实还可以推断说他的这个嗯

嗯实际的这个微表面的分布是什么样的对吧

知道他们怎么被刷的

那总之呢就是这么个意思

当然这里仍然是一个渲染的

图啊这个 vr 简单给大家多说一句

商用渲染器啊

在这个和各种各样的这些建模软件

像什么 3d s max 呀

玛雅都有一些联系

然后就是说得到广泛的应用还是不错的哈

然后虽然有人比他好

ok 那么这个嗯各向异性的材质啊

那咱们还可以再看一个这个例子哈

### 01:03:46,6

![01-03-46](tmp/01-03-46.jpg)

就是说各项异性材质

我们这里提一个这个尼龙

这个尼龙怎么回事呢

大家可以看到啊

就是说对于不同的这个布料来说啊

布料基本来说都是织在一块儿的哈

那这个大家看到正常的尼龙的织法很简单

一根压一根

水平竖直

啊各各有呃一根

然后这么无限延伸下去

那这个看起来已经没什么太多方向性了

所以说它基本上来说我们说它是这个呃各项异性

其实完全是说他的这个水平和数值是一样的

但是它的对角线上是不太一样的

比如说往这个方向对吧

斜着的这不一样

这块不一样

也就是反映出来之后分布它更像一个正方形

而不像是一个圆形啊

刚才大家看到这个例子

但它已经很接近这个各项同性了啊

这么个意思好

那么我们再看这个例子

这个是什么呢

### 01:04:33,56

![01-04-33](tmp/01-04-33.jpg)

这个叫 velvet

所谓天鹅绒

天鹅绒呢它有

一个这个这个很神奇的现象啊

天鹅绒他这个它其实咱们根本不应该把它当成是表面

为什么呢

因为它的这个底下织物

它那底底层哈

在底层上面它会有各种各样的这个一一条一条这个伸出去的

这个这个呃 fiber 哈

就是这个意思

就一根一根的这些植物

它会伸出去

所以它其实形成了一个这个体积

它并不是说定义在一个表面上

但如果我们认为是在这个表面上

那么我们就考虑他这个不同的这些一根一根的这个这个纤维啊

它往各个不同的方向上去

我认为可以认为是这个各项同性

但是呢我们认为它是各项异性

是为什么呢

是因为诶大家应该都玩过这个对吧

这个我非常喜欢呃

### 01:05:26,66

![01-05-26](tmp/01-05-26.jpg)

什么呢

就是说你可以把这些天鹅绒啊

它的这个表面

把这些这种这些纤维啊给拨到一边去

那拨到一边去

你可能就是人为的造出了一些这个各项异性的效果嘛

对不对

也就是说啊你其实可以通过自己来设计微表面

然后来改变这个他们的各项同性或者各项异性

从而改变他们的材质

### 01:05:46,80

![01-05-46](tmp/01-05-46.jpg)

从而改变他他们最后的外观

对不对

那所以说啊这个所有事情都可以这么解释的对吧

那非常好

那么嗯到这里呢

咱们差不多已经把这个材质这部分呃

### 01:05:56,10

![01-05-56](tmp/01-05-56.jpg)

算是就基本材质啊

算说差不多了

那咱们现在回头把这个 b2 df 的一些性质总结起来

刚才咱们说了这么些对吧

然后嗯今天我们就把这个性质说完吧

然后后面涉及到这个 b r d f 的哦

哎这样这样再再再再看吧

再看吧啊我先这个我先想办法把这个说完好吧

那么 b2 df 的属性我们回头来总结它

是因为我们现在已经见过了各种各样不同材质

然后现在差不多

也对 b2 df 的理解算是更深刻

首先呢最简单的材质 b2 df 的值永远是非负的

它表示了一个这个能量的分布

对不对

那不可能说出现了什么负能量什么

当然我希望这样真出现了

这样只是巨大的研究机会了

然后这是一个另外一个 bdf 的所谓线性性质

### 01:06:43,60

![01-06-43](tmp/01-06-43.jpg)

就是 linuity

这太好理解了

这个线性性质是什么呢

咱们之前老早就在用

就是我们说布林防模型的时候

我们是不是分成三块

分成 diffuse 和这个 spllar 和什么这个 ambient

我们分别把它算出来了之后

也就是说这个 bdf

本身我可以拆成很多块

把这很多块呢分别拿去做这个光线传播

然后我再把各个块加起来

得到的结果跟我用整个 b2 df 做光线传播一模一样

没问题啊

就是说它的线性性质好

那这都好理解

那后面稍微麻烦一点呢

### 01:07:19,73

![01-07-19](tmp/01-07-19.jpg)

是这个 b r d f 的这个可逆性啊

我们之前说光路的可逆性对吧

说这个我们把这个一一条光路

它的这个所有的这个方向都给反过来

仍然是一条这个嗯合理的光路

没有问题

就是光线还是会这么传播

然后呢 b r d f 的这个嗯所谓这个可逆性啊

更更好理解

很简

单就是你交换这个入射方向和出射方向的角色

你得到的这个 b r d f 的值一定是一样的

那也就是说你的 b r d f 你给它一个入射方向

一个出射方向

现在你把入射方向出射方向调换

调换之后

你会得到我严格意义上数字也完全一样的 b2 df 的值

这是它的这个基于物理的定义的一个好事情啊

就是说这个中间不会涉及到任何的转换

这两个是一模一样的

就是嗯 b r d f 啊

这个意思

那么另外一个性质

其实咱们刚才已经在用了哈

就是我们刚才说这个在算这个入射光和

出射光算那个 defuse 对吧

是是应该是多少

我们考虑能量守恒

所谓能量守恒

就是说 b r d f 的存在

绝对不可能让能量更能量变多

就是这个意思对吧

当然会有吸收

那么就是说如果是完全反射它的能量

也也就是原来的所有的入射的能量

然后如果说他是这个呃

就是说有部分被吸收

那它的能量就会比原来的小

那这里呢就是简单的把这个入射的这个能量 li 换成了一啊

那这个积起来小于等于一

没有问题好

那这个我嗯能

量守恒这个挺重要的

因为如果不满足这个能量守恒呢

呃会出现一个问题

就是你在做 pass string 的时候

咱们之前问过这个问题对吧

说这个经过了无限次的光线弹射之后

最后能量会收敛还是会爆炸

大家都会说收敛收敛是因为什么

收敛就是因为 b2 df 的能量嗯

这个 energy conservation 静止啊

如果说不满足这个性质的话

你要稍微多一点

最后社会爆炸好吧

这是这个 b rdf 的性质

然后呢我们刚才提到了 b r d f 有两种各项同性

### 01:09:23,6

![01-09-23](tmp/01-09-23.jpg)

各项异性

那么刚才说各项同性的话

就意味着指这个 b2 df 的值啊

只和这个呃相对的方位角有关

也就是跟这两个方位角的差值在二减 fi 有关

唉这样一来的话

它有什么好处呢

我可以写成这个形式对吧

写成这个形式

大家立刻就会发现原本四维的 b2 df 对吧

和 f 各两个嘛

四维的 b2 df 如果是各项同性材质

其实它就是三维的诶

这样的话整个维度就降低了一个

这是非常好的

然后呢更好的事情是所有的 b2 d f 不管它是各项同性

各项异性

它总归得有这个性质吧

得有这个嗯叫什么来着

就是就是呃可逆性吧对吧

那可逆性就意味着说如

果我交换他这个到 i 跟呃

不不不

这个这个入射光和出热光的这个角色对吧

他们两个得到的结果应该是一样的

那也就是说它们的相对的这个方位角其实还不用考虑正负

就是这个意思

他们的方位角就是谁比谁大多少

这个是没有关系的对吧

这个是从对称性上推出来的

这样的话我们就可以把它写成这个后面的这个方位角之差

再加个绝对值

我们不用考虑谁大谁小对吧

这挺好的

那这个性质好在哪儿

好在说我们后面要这个嗯给大家讲这个下一个话题的时候

会需要呃

就

是关于 b2 df 测量与储存

那这样吧

嗯是这样

我现在想法是下节课的内容啊相对较多

然后这节课如果我花再花三五分钟把这个什么

把这个 b2 df 的测量讲完

这节课就不用再多说了

这样下节课我们就有机会给大家多说

那个就是关于这个局部的坐标系 tb n 这块怎么算这块事情

因为我原本想安排的这节课

然后这个又有点多哈

这个行吧

那我就干脆把这个测量 b2 df 讲完啊

### 01:11:21,73

![01-11-21](tmp/01-11-21.jpg)

非常快啊

这个就是 b r d f 呢

我们可以用各种各样不同的模型去描述对吧

但各种各样的模型才

仅仅是说我基于物理的一种描述或者近似

那什么才是真正的 b2 df

只有说测出的 b2 df 才是对的

b2 df

那走吧

那这样想

那么我们为什么要测比二 df 呢

### 01:11:39,80

![01-11-39](tmp/01-11-39.jpg)

那如果说我之前的模型足够准

是不是就可以了呢

那显然是以前的模型并不足够准

大家可以看到啊

这个就是对于菲涅尔项目来说

然后如果说我们真的通过某些物理方法

我们可以测出一些非内尔向

我们会发现诶

这个绿线和这条红线好像和我的这个这个是 ek proximation

或者说我们之前那些理论上的那些曲线

看起来好像完全

不一样对吧

也就是说实际上来说这个菲尼尔像非常复杂

好像这个不是我们用那种简单公式可以描述的

那这样一来的话

这个是不是就是说我之前那个模型是不是就不太准对吧

但是确实是这么回事

也就是物理上有很多得出来的结论啊

这些都是这个有很多简化的和实际的这个嗯这个结论还是不太一样

所以说有很多情况下需要去做测量

这一第二呢如果我可以测量

我是不是就可以不推一些模型了

我直接用我测的数据对吧

这是非常好的

那所以说这是很有道理的

那么

我们需要去做 b2 df 的测量

那 b2 df 测量怎么算对吧

### 01:12:39,60

![01-12-39](tmp/01-12-39.jpg)

咱们想一想这个 b r d f 是什么

它不就是两个方向的一个函数吗

一个入射方向

一个出射方向对吧

那如果我盯着一个着色点看啊

就比如说我现在给你一个样本

我就盯着他某个点看

那我改变它的这个入射方向

就是我我找一个灯往从四面八方来照它

然后呢我再拿一个这个这个这个相机

我从四面八方去拍它

那这样的话是不是我就可以覆盖这个整个 b2 df

它的所有可能的输入方向

可能的输出方向

对没错吧

这样一

来我们就可以做这个测量呃

这个当然理论一些

但事实上来说它就是这么做的

大家可以看到这是一个仪器啊

### 01:13:16,66

![01-13-16](tmp/01-13-16.jpg)

这个仪器有名字叫 gameal reflect tometer

名字超级长啊

然后对于这个这个特定的这个仪器呢

它在一个球面上旋转

马上给大家解释

它又叫做 spherical gantry

然后这是一个真实存在的机器

我用这个机器做过的论文啊

然后这个是在这个我的老板的这个学校 ucsd 啊

然后嗯现在仍然还在

然后这是一个巨大的机器啊

这个不是照片上显示这么小

它直径得有个 2 米 3 米那样

然后就是说他能干什么

它是一个这个机械

它有两个爪子

一个爪子呢可以抓一个相机

另外一个爪子可以抓一个光源

然后呢他把这个样本放在这个正中间

就放在他的所谓球星上

这两个爪子呢可以让这个相机和这个这个这个光源啊

而且呢它这个非常大

而且又非常精确

它可以精确到 0.1 度这种这种级别啊

然后他就是和我们刚才说的这个这个测量方法完全一样

给定入射出射对吧好

那没问题好啊

ok 这样的话呢呃我们就可以直接得到一个非常简单的算法

### 01:14:27,36

![01-14-27](tmp/01-14-27.jpg)

我们去枚举所有的出射方向

然后把这个光源放上去

我们去枚举所有的这个这个出射方向

我们把这个相机放上去

没关系

然后我们测一下它的这个得出来的结果的 radiance 是多少

这不就是 b r d f 吗

不就是四维的吗

但是大家想象一下四维这个操作可非常这个费事啊

比如说刚才那个机器

你固定了你的这个摄像机之后

你的整个的这个叫什么呃

唉这个这个这个这个光源哈

你不走一遍这个这个球面才能覆盖所有光源的方向

那你下回换一下

你的这个相机的方向

你就得把这个光源在整个球面上再走一遍

下面再换一个相机方向

这还得了

这是四四维

对不对

二维成二维这个东西我们之前说过

这叫 curse of dimensionality

诶坏了

我们说过没

但没关系啊

反正就是说维度往上一涨

数据量立刻就上去

就是这个意思

那么怎么才能这个解决这个问题呢

之前我们提到一个这个事情

如果我们认为我们测的 b2 df 是各项同性的

那么它其实是只有三维的对吧

我们就可以把这个四维降到三维哎

然后呢如果我们就用这个这个 b r d f 的这

个肯定性

我们只考虑相对方位角的话

又可以砍掉一半的测量对吧

然后就是这么回事

然后我们可以设计更好的一些思路

我比如说我不用这么把这个呃球面上所有这些点

对这些这些方向对我都可采样的

我只用采样若干不同方向

我剩下的东西我可以猜出来诶

这个是可以的

现在也是时下的热门啊

就是说关于 b2 df 的一系列的更聪明的测量

然后就是说呃这是这是一个方向

### 01:16:09,83

![01-16-09](tmp/01-16-09.jpg)

然后呢当然有各种各样不同的这些

类型在这里时间所限啊

这可是不给大家多说了啊

然后嗯就是说我们测量出 b2 df 之后啊

### 01:16:18,86

![01-16-18](tmp/01-16-18.jpg)

肯定是要把它给这个嗯怎么说呢

肯定要把这个 b2 df 给存起来

表示起来对吧

我之后还要用对吧

那我要把它给表示出来

或者说存下来

那肯定涉及到大量的存储

对不对

那这个怎么办

对不对

然后这就是就是各种各样不同的这个呃

测量 b2 df 之后的存储要求对吧

然后这个呃也一样

### 01:16:45,96

![01-16-45](tmp/01-16-45.jpg)

同样不给大家多说了啊

关于这块这个存储的事情

也有大量的这种这种压缩呀

然后这种这种方面的研

究也有说用什么神经网络来做压缩

然后也是算是一个比较热门的话题

对于 b2 df 来说好吧

那么这里呢给大家介绍一个很有名的 bdf 的库

这个库是什么呢

就是叫做 moral database 啊

这个 m e r l 叫三菱电子实验室啊

这是当时和 mit 在一块这个合作的项目

然后这个非常非常有名

然后这个项目呢就是说他做了一个什么事情

他是测量了这个很多不同的这些材质

而这些材质它们假设都是这个各项同性的

当然后来他们又改进加了一些各项异性啊

咱们就先从这一点版本说

就是说他

们这个各项同性的材质

我们知道各项同性材质 b2 df 3 维我只能测这个呃

两个 c 带和方位角的这个绝对值

方位角相对方位角的绝对值就好了对吧

那这样一来呢

他就取了 90x90x180 这么多次

这个测量就每一个材质做那么多次测量

你算一算

这是超大的数啊

然后就是说这样一来

然后他就可以把这些材质都给表示出来

并且把最后的结果存到一个三维的数组里面去

好没问题

那是当然了

大家可以看到它如果不做压缩的话

那是一个多么大的这个这个存储对

吧然后这个没问题啊

然后这个就是今天的这个所有话题了

差不多到此为止

咱们今天这个任务完成
